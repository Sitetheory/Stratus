!function(e,t){"function"==typeof define&&define.amd?define(["text","underscore","bowser","promise","backbone","jquery"],function(n,i,o){return e.Stratus=t(n,i,o)}):e.Stratus=t(e.text,e._,e.bowser)}(this,function(e,t,n){var i={Settings:{image:{size:{xs:200,s:400,m:600,l:800,xl:1200,hq:1600}},status:{reset:-2,deleted:-1,inactive:0,active:1},consent:{reject:-1,pending:0,accept:1}},DOM:{},Key:{},PostMessage:{},LocalStorage:{},Selector:{},Select:null,BaseUrl:(requirejs&&t.has(requirejs.s.contexts._,"config")?requirejs.s.contexts._.config.baseUrl:null)||"/",BundlePath:(requirejs&&t.has(requirejs.s.contexts._,"config")?requirejs.s.contexts._.config.bundlePath:"")||"",Collections:null,Models:null,Routers:null,Views:{Plugins:{},Widgets:{}},Events:{},Relations:{},Apps:{},Catalog:{},Compendium:{},Components:{},Controllers:{},Directives:{},Filters:{},Modules:{ngMaterial:!0,ngMessages:!0},Services:{},Client:n,CSS:{},Chronos:null,Environment:{ip:null,production:!("string"==typeof document.cookie&&-1!==document.cookie.indexOf("env=")),context:null,contextId:null,contextMasterSiteId:null,siteId:null,masterSiteId:null,language:navigator.language,timezone:null,trackLocation:0,trackLocationConsent:0,lat:null,lng:null,postalCode:null,city:null,region:null,country:null,debugNest:!1,liveEdit:!1,viewPortChange:!1,viewPort:null,lastScroll:!1},History:{},Instances:{},Internals:{},Loaders:{},Prototypes:{},Resources:{},Roster:{controller:{selector:"[ng-controller]",namespace:"stratus.controllers."},components:{namespace:"stratus.components."},directives:{namespace:"stratus.directives.",type:"attribute"},flex:{selector:"[flex]",require:["angular","angular-material"]},chart:{selector:"[chart]",require:["angular","angular-chart"],module:!0,suffix:".js"},sortable:{selector:"[ng-sortable]",require:["angular-sortable"],module:"ng-sortable"},modules:{selector:["[ng-sanitize]","[froala]"],namespace:"angular-",module:!0},countUp:{selector:["[count-up]","[scroll-spy]"],namespace:"angular-",module:!0,suffix:"Module"},uiTree:{selector:"[ui-tree]",require:["angular-ui-tree"],module:"ui.tree"}},PluginMethods:{},RegisterGroup:{},Api:{GoogleMaps:"AIzaSyBatGvzPR7u7NZ3tsCy93xj4gEBfytffyA",Froala:"FB2C2D2B1uB5A2B2D3A5F1D4E1A3B17hfE-13cA-9mrI-7sogE4in=="}};i.Environment.production||console.group("Stratus Warm Up"),t.templateSettings={evaluate:/\{%(.+?)%\}/g,interpolate:/\{\{(.+?)\}\}/g,escape:/\{#(.+?)#\}/g},t.mixin({createClass:function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),possibleConstructorReturn:function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},inherits:function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&Object.setPrototypeOf(e,t)},classCallCheck:function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},inherit:function(e,n){var i=function(e){t.classCallCheck(this,i);var o=t.possibleConstructorReturn(this,Object.getPrototypeOf(i).call(this,e,e));return t.extend(o,n),o};return t.inherits(i,e),i},ucfirst:function(e){return"string"==typeof e&&e?e.charAt(0).toUpperCase()+e.substring(1):null},lcfirst:function(e){return"string"==typeof e&&e?e.charAt(0).toLowerCase()+e.substring(1):null},cookie:function(e,n,i,o,s){var r={name:e,value:n,expires:i,path:o||"/",domain:s};if(e&&"object"==typeof e&&t.extend(r,e),void 0===r.value){var a=new RegExp("(?:^"+r.name+"|;\\s*"+r.name+")=(.*?)(?:;|$)","g").exec(document.cookie);return null===a?null:a[1]}var l=r.name+"="+escape(r.value)+";";r.expires&&(r.expires instanceof Date?isNaN(r.expires.getTime())&&(r.expires=new Date):r.expires=new Date((new Date).getTime()+1e3*t.seconds(r.expires)),l+="expires="+r.expires.toUTCString()+";"),r.path&&(l+="path="+r.path+";"),r.domain&&(l+="domain="+r.domain+";"),document.cookie=l},converge:function(e,n){if("string"!=typeof n&&(n="min"),"min"===n){var i=t.min(e);return t.findKey(e,function(e){return e===i})}if("radial"===n);else if("gauss"!==n)return e},repeat:function(e,t){var n;if("function"==typeof e&&"number"==typeof t)for(n=0;n<t;n++)e();else console.warn("Underscore cannot repeat function:",e,"with number of times:",t)},dehydrate:function(e){return"string"==typeof e?e:JSON.stringify(e)},hydrate:function(e){return t.isJSON(e)?JSON.parse(e):e},hydrateString:function(e){return t.hydrate(e)},cloneDeep:function(e){if("object"!=typeof e)return e;var n=t.clone(e);return t.each(n,function(e,i){n[i]=t.cloneDeep(e)}),n},extendDeep:function(e,n){var i=t.clone(e);return n&&"object"==typeof n?t.each(n,function(e,o){i&&"object"==typeof i&&(i[o]=o in i?t.extendDeep(i[o],n[o]):n[o])}):i=n,i},getUrlParams:function(e,t){var n={};return(t=void 0!==t?t:window.location.href).replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,i){n[t]=i}),void 0!==e&&e?n[e]:n},allTrue:function(e){return"object"==typeof e&&t.every(e,function(e){return e})},isJSON:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},isAngular:function(e){return"object"==typeof angular&&angular&&angular.element&&e instanceof angular.element},isjQuery:function(e){return"function"==typeof jQuery&&e instanceof jQuery},seconds:function(e){var n=0;if("string"==typeof e){var i=e.match(/([\d+.]*[\d+])(?=[sSmMhHdDwWyY]+)([sSmMhHdDwWyY]+)/gi);if(t.size(i)){var o,s,r,a=/([\d+.]*[\d+])(?=[sSmMhHdDwWyY]+)([sSmMhHdDwWyY]+)/i;t.each(i,function(e){if(o=a.exec(e),r=parseFloat(o[1]),s=o[2],!isNaN(r)){switch(o[2]){case"s":s=1;break;case"m":s=60;break;case"h":s=3600;break;case"d":s=86400;break;case"w":s=604800;break;case"y":s=31558149.504;break;default:s=0}n+=r*s}},this)}else n=null}else n="number"==typeof e?e:null;return n},camelToHyphen:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},hyphenToCamel:function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})},snakeToCamel:function(e){return e.replace(/(_\w)/g,function(e){return e[1].toUpperCase()})},startsWith:function(e,t){return"string"==typeof e&&e.substr(0,t.length).toUpperCase()===t.toUpperCase()},patch:function(e,n){if(!t.isObject(e)||!t.size(e))return null;var i={},o={eax:void 0,ebx:void 0,ecx:void 0,edx:void 0};if(t.isObject(n)&&t.size(n)){var s=function(e,r){o.eax=o.ecx?o.ecx+"."+r:r,t.isObject(e)?(o.ecx=o.eax,t.each(e,s),o.ecx=o.ecx===r?void 0:o.ecx.substring(0,o.ecx.lastIndexOf("."))):(o.ebx=t.reduce(o.eax.split("."),function(e,t){return e&&e[t]},n),o.ebx!==e&&(o.edx=e)),void 0!==o.edx&&(i[o.eax]=e,o.edx=void 0)};t.each(e,s)}else console.error("bad prior:",n);return i&&t.size(i)?i:null},strcmp:function(e,t){e=e.toString(),t=t.toString();for(var n=0,i=Math.max(e.length,t.length);n<i&&e.charAt(n)===t.charAt(n);++n);return n===i?0:e.charAt(n)>t.charAt(n)?-1:1},truncate:function(e,t,n){t=t||100,n=n||"...";for(var i,o,s,r,a,l=e.replace(/</g,"\n<").replace(/>/g,">\n").replace(/\n\n/g,"\n").replace(/^\n/g,"").replace(/\n$/g,"").split("\n"),c=0,u=[],d=0;d<l.length;d++){var h=(i=l[d]).replace(/[ ]+/g," ");if(i.length){if("<"!==i[0])if(c>=t)i="";else if(c+h.length>=t){if(" "===i[(o=t-c)-1])for(;o&&" "===i[(o-=1)-1];);else-1!==(s=i.substring(o).split("").indexOf(" "))?o+=s:o=i.length;i=i.substring(0,o)+n,c=t}else c+=h.length;else if(c>=t)if(a=(r=i.match(/[a-zA-Z]+/))?r[0]:"")if("</"!==i.substring(0,2))u.push(a),i="";else{for(;u[u.length-1]!==a&&u.length;)u.pop();u.length&&(i=""),u.pop()}else i="";l[d]=i}}return l.join("\n").replace(/\n/g,"")}}),"function"==typeof $&&$.fn&&($.fn.notClicked=function(e){return this.selector||this.context||console.error("No Selector or Context:",this),!$(e.target).closest(this.selector||this.context).length&&!$(e.target).parents(this.selector||this.context).length});var o=/\s+/,s=function(e,n,i,r,a){var l,c=0;if(i&&"object"==typeof i){void 0!==r&&"context"in a&&void 0===a.context&&(a.context=r);for(l=t.keys(i);c<l.length;c++)n=s(e,n,l[c],i[l[c]],a)}else if(i&&o.test(i))for(l=i.split(o);c<l.length;c++)n=e(n,l[c],r,a);else n=e(n,i,r,a);return n};i.Events.on=function(e,t,n){return r(this,e,t,n)};var r=function(e,t,n,i,o){(e._events=s(a,e._events||{},t,n,{context:i,ctx:e,listening:o}),o)&&((e._listeners||(e._listeners={}))[o.id]=o);return e};i.Events.listenTo=function(e,n,i){if(!e)return this;var o=e._listenId||(e._listenId=t.uniqueId("l")),s=this._listeningTo||(this._listeningTo={}),a=s[o];if(!a){var l=this._listenId||(this._listenId=t.uniqueId("l"));a=s[o]={obj:e,objId:o,id:l,listeningTo:s,count:0}}return r(e,n,i,this,a),this};var a=function(e,t,n,i){if(n){var o=e[t]||(e[t]=[]),s=i.context,r=i.ctx,a=i.listening;a&&a.count++,o.push({callback:n,context:s,ctx:s||r,listening:a})}return e};i.Events.off=function(e,t,n){return this._events?(this._events=s(l,this._events,e,t,{context:n,listeners:this._listeners}),this):this},i.Events.stopListening=function(e,n,i){var o=this._listeningTo;if(!o)return this;for(var s=e?[e._listenId]:t.keys(o),r=0;r<s.length;r++){var a=o[s[r]];if(!a)break;a.obj.off(n,i,this)}return this};var l=function(e,n,i,o){if(e){var s,r=0,a=o.context,l=o.listeners;if(n||i||a){for(var c=n?[n]:t.keys(e);r<c.length;r++){var u=e[n=c[r]];if(!u)break;for(var d=[],h=0;h<u.length;h++){var f=u[h];i&&i!==f.callback&&i!==f.callback._callback||a&&a!==f.context?d.push(f):(s=f.listening)&&0==--s.count&&(delete l[s.id],delete s.listeningTo[s.objId])}d.length?e[n]=d:delete e[n]}return e}for(var p=t.keys(l);r<p.length;r++)delete l[(s=l[p[r]]).id],delete s.listeningTo[s.objId]}};i.Events.once=function(e,n,i){var o=s(c,{},e,n,t.bind(this.off,this));return"string"==typeof e&&null==i&&(n=void 0),this.on(o,n,i)},i.Events.listenToOnce=function(e,n,i){var o=s(c,{},n,i,t.bind(this.stopListening,this,e));return this.listenTo(e,o)};var c=function(e,n,i,o){if(i){var s=e[n]=t.once(function(){o(n,s),i.apply(this,arguments)});s._callback=i}return e};i.Events.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return s(u,this._events,e,void 0,n),this};var u=function(e,t,n,i){if(e){var o=e[t],s=e.all;o&&s&&(s=s.slice()),o&&d(o,i),s&&d(s,[t].concat(i))}return e},d=function(e,t){var n,i=-1,o=e.length,s=t[0],r=t[1],a=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,s,r);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,s,r,a);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t)}};return i.Events.bind=i.Events.on,i.Events.unbind=i.Events.off,i.Prototypes.Error=function(e,n){this.code="Internal",this.message="No discernible data received.",this.chain=[],"string"==typeof e?this.message=e:e&&"object"==typeof e&&t.extend(this,e),this.chain.push(n)},i.Prototypes.Dispatch=function(){return t.extend(this,i.Events)},i.Prototypes.Job=function(e,n,i){return this.enabled=!1,e&&"object"==typeof e?t.extend(this,e):(this.time=e,this.method=n,this.scope=i),this.time=t.seconds(this.time),this.scope=this.scope||window,this},i.Prototypes.Model=function(e){return this.data={},this.attributes=this.data,this.temps={},this.toObject=function(e){return t.clone(this.data)},this.toJSON=function(e){return t.clone(this.data)},this.each=function(e,n){t.each.apply(void 0===n?this:n,t.union([this.data],arguments))},this.get=function(e){return t.reduce("string"==typeof e?e.split("."):[],function(e,t){return e&&e[t]},this.data)},this.has=function(e){return void 0!==this.get(e)},this.size=function(){return t.size(this.data)},this.set=function(e,n){e&&"object"==typeof e?t.each(e,function(e,t){this.setAttribute(t,e)},this):this.setAttribute(e,n)},this.setAttribute=function(e,n){if("string"==typeof e)if(-1!==e.indexOf(".")){var i=this.data,o=e.split(".");if(t.find(t.initial(o),function(e){if(t.has(i,e)&&i[e]||(i[e]={}),void 0===i||!i||"object"!=typeof i)return i=this.data,!0;i=i[e]},this),!t.isEqual(i,this.data)){var s=t.last(o);!i||"object"!=typeof i||t.has(i,s)&&t.isEqual(i[s],n)||(i[s]=n,this.trigger("change:"+e,this))}}else t.has(this.data,e)&&t.isEqual(this.data[e],n)||(this.data[e]=n,this.trigger("change:"+e,this))},this.temp=function(e,n){this.set(e,n),e&&"object"==typeof e?t.each(e,function(e,t){this.temps[t]=e},this):this.temps[e]=n},this.add=function(e,n){if(this.has(e)||this.set(e,[]),void 0!==n&&!t.contains(this.data[e],n))return this.data[e].push(n),n},this.remove=function(e,n){return void 0===n||(this.data[e]=t.without(this.data[e],n)),this.data[e]},this.iterate=function(e){return this.has(e)||this.set(e,0),++this.data[e]},this.clear=function(){for(var e in this.data)this.data.hasOwnProperty(e)&&delete this.data[e]},this.clearTemp=function(){for(var e in this.temps)this.temps.hasOwnProperty(e)&&delete this.temps[e]},this.initialize=function(){return!0},e&&t.extend(this.data,e),t.extend(this,i.Events),this.reinitialize=function(){this.initialize.apply(this,arguments)}.bind(this),this.reinitialize(),this},i.Collections=new i.Prototypes.Model,i.Models=new i.Prototypes.Model,i.Routers=new i.Prototypes.Model,i.Environment=new i.Prototypes.Model(i.Environment),i.Prototypes.Sentinel=function(){return this.view=!1,this.create=!1,this.edit=!1,this.delete=!1,this.publish=!1,this.design=!1,this.dev=!1,this.master=!1,this.zero=function(){t.extend(this,{view:!1,create:!1,edit:!1,delete:!1,publish:!1,design:!1,dev:!1,master:!1})},this.permissions=function(e){if(isNaN(e)){var n=0;return n+=this.view?1:0,n+=this.create?2:0,n+=this.edit?4:0,n+=this.delete?8:0,n+=this.publish?16:0,n+=this.design?32:0,n+=this.dev?64:0,n+=this.master?128:0}t.each(e.toString(2).split("").reverse(),function(e,t){if("1"===e)switch(t){case 0:this.view=!0;break;case 1:this.create=!0;break;case 2:this.edit=!0;break;case 3:this.delete=!0;break;case 4:this.publish=!0;break;case 5:this.design=!0;break;case 6:this.dev=!0;break;case 7:this.view=!0,this.create=!0,this.edit=!0,this.delete=!0,this.publish=!0,this.design=!0,this.dev=!0,this.master=!0}},this)},this.summary=function(){var e=[];return t.each(this,function(n,i){"boolean"==typeof n&&n&&e.push(t.ucfirst(i))}),e},this},i.Prototypes.Bootbox=function(e,n){e&&"object"==typeof e?(t.extend(this,e),this.message=this.message||"Message"):this.message=e||"Message",this.handler=this.handler||n,"function"!=typeof this.handler&&(this.handler=function(e){console.info("Client "+(void 0===e?"closed":e?"confirmed":"cancelled")+" dialog.")})},i.Prototypes.Toast=function(e,n,i,o){e&&"object"==typeof e?(t.extend(this,e),this.message=this.message||"Message"):this.message=e||"Message",this.title=this.title||n||"Toast",this.priority=this.priority||i||"danger",this.settings=this.settings||o,this.settings&&"object"==typeof this.settings||(this.settings={}),this.settings.timeout=this.settings.timeout||1e4},i.Internals.Ajax=function(e){this.method="GET",this.url="/Api",this.data={},this.type="",this.success=function(e){return e},this.error=function(e){return e},t.extend(this,e);var n=this;this.xhr=new window.XMLHttpRequest;var i=new Promise(function(e,i){n.xhr.open(n.method,n.url,!0),"string"==typeof n.type&&n.type.length&&n.xhr.setRequestHeader("Content-Type",n.type),n.xhr.onload=function(){if(n.xhr.status>=200&&n.xhr.status<400){var o=n.xhr.responseText;t.isJSON(o)&&(o=JSON.parse(o)),e(o)}else i(n.xhr)},n.xhr.onerror=function(){i(n.xhr)},Object.keys(n.data).length?n.xhr.send(JSON.stringify(n.data)):n.xhr.send()});return i.then(n.success,n.error),i},i.Internals.Anchor=function e(){return e.initialize=!0,"object"!=typeof Backbone?e:Backbone.View.extend({el:'a[href*=\\#]:not([href=\\#]):not([data-scroll="false"])',events:{click:"clickAction"},clickAction:function(e){if(window.location.pathname.replace(/^\//,"")===e.currentTarget.pathname.replace(/^\//,"")&&window.location.hostname===e.currentTarget.hostname){if(t.every(["new","filter","page","version"],function(n){return!t.startsWith(e.currentTarget.hash,"#"+n)},this)&&"function"==typeof $&&$.fn&&"object"==typeof Backbone){var n=$(e.currentTarget.hash),i=e.currentTarget.hash.slice(1);if((n=n.length?n:$("[name="+i+"]")).length)return $("html,body").animate({scrollTop:n.offset().top},1e3,function(){Backbone.history.navigate(i)}),!1}}}})}(),i.Internals.Api=function(e,n,o){return void 0===e&&(e="Default"),null==n&&(n={}),void 0===o&&(o={}),"object"!=typeof n&&(n={method:n}),t.has(n,"method")||(n.method="GET"),i.Internals.Convoy({route:{controller:e},meta:n,payload:o})},i.Internals.Compatibility=function(){var e=[];i.Client.android?e.push("android"):i.Client.ios?e.push("ios"):i.Client.mac?e.push("mac"):i.Client.windows?e.push("windows"):i.Client.linux?e.push("linux"):e.push("os"),i.Client.chrome?e.push("chrome"):i.Client.firefox?e.push("firefox"):i.Client.safari?e.push("safari"):i.Client.opera?e.push("opera"):i.Client.msie?e.push("msie"):i.Client.iphone?e.push("iphone"):e.push("browser"),i.Client.version&&e.push("version"+i.Client.version.split(".")[0]),i.Client.mobile?e.push("mobile"):i.Client.tablet?e.push("tablet"):e.push("desktop"),i("body").addClass(e.join(" "))},i.Internals.Convoy=function(e,n){return new Promise(function(o,s){void 0===e&&s(new i.Prototypes.Error({code:"Convoy",message:"No Convoy defined for dispatch."},this)),"function"==typeof $&&$.ajax?$.ajax({type:"POST",url:"/Api"+encodeURIComponent(n||""),data:{convoy:JSON.stringify(e)},dataType:t.has(e,"meta")&&t.has(e.meta,"dataType")?e.meta.dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,headers:{"Access-Control-Allow-Origin":"*"},success:function(e){return o(e),e},error:function(e){return s(new i.Prototypes.Error({code:"Convoy",message:e},this)),e}}):i.Internals.Ajax({method:"POST",url:"/Api"+encodeURIComponent(n||""),data:{convoy:JSON.stringify(e)},type:t.has(e,"meta")&&t.has(e.meta,"dataType")?e.meta.dataType:"application/json",success:function(e){return e=e.payload||e,o(e),e},error:function(e){return s(new i.Prototypes.Error({code:"Convoy",message:e},this)),e}})})},i.Internals.CssLoader=function(e){return new Promise(function(t,n){if(e in i.CSS)i.CSS[e]?t():i.Events.once("onload:"+e,t);else{i.CSS[e]=!1;var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e,i.Events.once("onload:"+e,function(){i.CSS[e]=!0,t()}),"onload"in o&&!i.Client.android?o.onload=function(){i.Events.trigger("onload:"+e)}:(i.CSS[e]=!0,i.Events.trigger("onload:"+e)),i("head").append(o)}})},i.Internals.GetColWidth=function(e){if(void 0===e||!e)return!1;var t=e.attr("class");if(void 0===t||!t)return!1;var n=/col-.{2}-([0-9]*)/g.exec(t);return!(void 0===n||!n)&&(void 0!==n[1]&&n[1])},i.Internals.GetScrollDir=function(){let e=$(i.Environment.get("viewPort")||window).scrollTop(),t=i.Environment.get("windowTop");return!!t&&e>t?"down":!!(!!t&&e<t)&&"up"},i.Internals.IsOnScreen=function(e,t,n){if(!e)return!1;if(e instanceof $||(e=$(e)),!e.length)return!1;t=t||0,"boolean"!=typeof n&&(n=!0);let o=$(i.Environment.get("viewPort")||window).scrollTop(),s=o+$(i.Environment.get("viewPort")||window).height(),r=e.offset().top,a=r+e.height();return o+=t,s-=t,n?r<=s&&a>=o:o<r&&s>a},i.Internals.LoadCss=function(e){return new Promise(function(n,o){void 0!==e&&"function"!=typeof e||o(new i.Prototypes.Error({code:"LoadCSS",message:"CSS Resource URLs must be defined as a String, Array, or Object."},this)),"string"==typeof e&&(e=[e]);var s={total:e.length,iteration:0};s.total>0?t.each(e.reverse(),function(e){s.iteration++;var r=t.uniqueId("css_");s[r]=!1,void 0!==e&&e?i.Internals.CssLoader(e).then(function(e){s[r]=!0,s.total===s.iteration&&t.allTrue(s)&&n(s)},o):(s[r]=!0,s.total===s.iteration&&t.allTrue(s)&&n(s))}):o(new i.Prototypes.Error({code:"LoadCSS",message:"No CSS Resource URLs found!"},this))})},i.Internals.LoadEnvironment=function(){var e=i("body").attr("data-environment");e&&"object"==typeof e&&t.size(e)&&i.Environment.set(e)},i.Internals.LoadImage=function(e){if(!e.el)return setTimeout(function(){i.Internals.LoadImage(e)},500),!1;let n=e.el instanceof $?e.el:$(e.el);if(!n.length)return setTimeout(function(){i.Internals.LoadImage(e)},500),!1;n.hasClass("placeholder")||(n.addClass("placeholder"),n.on("load",function(){n.removeClass("placeholder")})),i.Internals.IsOnScreen(e.spy||n)&&!t.hydrate(n.attr("data-loading"))&&(n.attr("data-loading",t.dehydrate(!0)),i.DOM.complete(function(){let o=t.hydrate(n.attr("data-hd"));void 0===o&&(o=!0);let s=t.hydrate(n.attr("data-src"));s&&"lazy"!==s&&!t.isEmpty(s)||(s=n.attr("src"));let r=null;if(t.hydrate(n.attr("data-size"))&&!1!==r.indexOf(t.hydrate(n.attr("data-size"))))r=t.hydrate(n.attr("data-size"));else{let s=null,c=null,u=null;if(n.width()?s=n.width():n.attr("width")&&(s=n.attr("width")),s){c=(s=/([\d]+)(.*)/.exec(s))[2],s=parseInt(s[1]),u="%"===c?s/100:null}if(!s||"%"===c){let o=t.hydrate(n.attr("data-ignorevisibility"))?null:":visible",r=$(t.first($(e.el).parents(o)));s=r?r.width():0;var a=r.find('[class*="col-"]');if(a.length>0){var l=i.Internals.GetColWidth(a);l&&(s=Math.round(s/l))}u&&(s=Math.round(s*u))}if(s<=0)return setTimeout(function(){n.attr("data-loading",t.dehydrate(!1)),i.Internals.LoadImage(e)},500),!1;o&&(s*=2),"xs"===(r=(r=t.findKey(i.Settings.image.size,function(e){let t=e/s;return t>.85&&t<1.15||e>s}))||"hq")&&setTimeout(function(){n.attr("data-loading",t.dehydrate(!1)),i.Internals.LoadImage(e)},1500)}let c=/^(.+?)(-[A-Z]{2})?\.(?=[^.]*$)(.+)/gi.exec(s);null!==c?s=c[1]+"-"+r+"."+c[3]:console.error("Unable to find src for image:",n),t.isEmpty(s)||n.attr("src",s.startsWith("//")?window.location.protocol+s:s),n.addClass("loading"),n.on("load",function(){n.addClass("loaded").removeClass("loading")}),i.RegisterGroup.remove("OnScroll",e)}))},i.Internals.Location=function(e){return new Promise(function(n,o){"geolocation"in navigator?(e=t.extend({enableHighAccuracy:!0,timeout:2e4,maximumAge:5e4},e||{}),navigator.geolocation.getCurrentPosition(n,o,e)):o(new i.Prototypes.Error({code:"Location",message:"HTML5 Geo-Location isn't supported on this browser."},this))})},i.Internals.OnScroll=t.once(function(e){i.Environment.on("change:viewPortChange",function(e){if(e.get("viewPortChange")){e.set("lastScroll",i.Internals.GetScrollDir());var n=i.RegisterGroup.get("OnScroll");t.each(n,function(e){void 0!==e&&t.has(e,"method")&&e.method(e)}),e.set("viewPortChange",!1),e.set("windowTop",$(i.Environment.get("viewPort")||window).scrollTop())}}),"function"==typeof $&&$.fn&&($(i.Environment.get("viewPort")||window).scroll(function(){!1===i.Environment.get("viewPortChange")&&i.Environment.set("viewPortChange",!0)}),$(i.Environment.get("viewPort")||window).resize(function(){!1===i.Environment.get("viewPortChange")&&i.Environment.set("viewPortChange",!0)})),i.Environment.set("viewPortChange",!0)}),i.Internals.Resource=function(e,n){return new Promise(function(o,s){if(void 0===e&&s(new i.Prototypes.Error({code:"Resource",message:"Resource path is not defined."},this)),t.has(i.Resources,e))i.Resources[e].success?o(i.Resources[e].data):i.Events.once("resource:"+e,o);else{i.Resources[e]={success:!1,data:null},i.Events.once("resource:"+e,o);var r={path:e,dataType:"text"};void 0!==n&&(r.elementId=n),i.Internals.Api("Resource",r,{}).then(function(t){i.Resources[e].success=!0,i.Resources[e].data=t,i.Events.trigger("resource:"+e,t)},s)}})},i.Internals.SetUrlParams=function(e,n){if(void 0===n&&(n=window.location.href),void 0===e)return n;var i={},o=n.indexOf("?"),s=n.indexOf("#"),r="";return s>=0&&(r=n.substring(s,n.length),n=n.substring(0,s)),n.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,n){i[t]=n}),i=t.extend(i,e),(o>=0?n.substring(0,o):n)+"?"+t.reduce(t.map(i,function(e,t){return t+"="+e}),function(e,t){return e+"&"+t})+r},i.Internals.TrackLocation=function(){var e={};e.timezone=(new Date).toString().match(/\((.*)\)/)[1],i.Environment.get("trackLocation")?i.Environment.get("trackLocationConsent")?i.Internals.Location().then(function(t){e.lat=t.coords.latitude,e.lng=t.coords.longitude,i.Environment.set("lat",t.coords.latitude),i.Environment.set("lng",t.coords.longitude),i.Internals.UpdateEnvironment(e)},function(e){console.error("Stratus Location:",e)}):i.Internals.Ajax({url:"https://ipapi.co/"+i.Environment.get("ip")+"/json/",success:function(t){t||(t={}),"object"==typeof t&&Object.keys(t).length&&t.postal&&(e.postalCode=t.postal,e.lat=t.latitude,e.lng=t.longitude,e.city=t.city,e.region=t.region,e.country=t.country,i.Internals.UpdateEnvironment(e))}}):i.Internals.UpdateEnvironment(e)},i.Internals.UpdateEnvironment=function(e){if(e||(e={}),"string"!=typeof document.cookie||!t.cookie("SITETHEORY"))return!1;"object"==typeof e&&Object.keys(e).length&&i.Internals.Ajax({method:"PUT",url:"/Api/Session",data:e,type:"application/json",success:function(e){var n=e.payload||e;"object"==typeof n&&t.each(Object.keys(n),function(e){i.Environment.set(e,n[e])})},error:function(e){console.error("error:",e)}})},i.Select=function(e,n){n||(n=document);let o=e;if("string"==typeof e){let i;o=n[i=t.startsWith(e,".")||t.contains(e,"[")?"querySelectorAll":t.contains(["html","head","body"],e)||t.startsWith(e,"#")?"querySelector":"querySelectorAll"](e)}return o&&"object"==typeof o&&((t.isAngular(o)||t.isjQuery(o))&&(o=o.length?t.first(o):{}),o=t.extend({},i.Selector,{context:this,length:t.size(o),selection:o,selector:e})),o},(i=t.extend(function(e,t){return i.Select(e,t)},i)).Selector.attr=function(e,n){if(this.selection instanceof window.NodeList)return console.warn('Unable to find "'+e+'" for list:',this.selection),null;if(e){if(void 0===n)return n=this.selection.getAttribute(e),t.hydrate(n);this.selection.setAttribute(e,t.dehydrate(n))}return this},i.Selector.each=function(e){return"function"!=typeof e&&(e=function(e){console.warn("each running on element:",e)}),this.selection instanceof window.NodeList&&t.each(this.selection,e),this},i.Selector.find=function(e){if(this.selection instanceof window.NodeList)console.warn('Unable to find "'+e+'" for list:',this.selection);else if(e)return i(e,this.selection);return null},i.Selector.map=function(e){return"function"!=typeof e&&(e=function(e){console.warn("map running on element:",e)}),this.selection instanceof window.NodeList?t.map(this.selection,e):this},i.Selector.append=function(e){return this.selection instanceof window.NodeList?console.warn("Unable to append child:",e,"to list:",this.selection):e&&this.selection.insertBefore(e,this.selection.lastChild),this},i.Selector.prepend=function(e){return this.selection instanceof window.NodeList?console.warn("Unable to prepend child:",e,"to list:",this.selection):e&&this.selection.insertBefore(e,this.selection.firstChild),this},i.Selector.addClass=function(e){var n=this;return n.selection instanceof window.NodeList?console.warn('Unable to add class "'+e+'" to list:',n.selection):t.each(e.split(" "),function(e){n.selection.classList?n.selection.classList.add(e):n.selection.className+=" "+e}),n},i.Selector.removeClass=function(e){var n=this;return n.selection instanceof window.NodeList?console.warn('Unable to remove class "'+e+'" from list:',n.selection):n.selection.classList?t.each(e.split(" "),function(e){n.selection.classList.remove(e)}):n.selection.className=n.selection.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," "),n},i.Selector.style=function(){if(this.selection instanceof window.NodeList)console.warn("Unable to find style for list:",this.selection);else if(this.selection instanceof window.Node)return window.getComputedStyle(this.selection);return null},i.Selector.height=function(){return this.selection instanceof window.NodeList?(console.warn("Unable to find height for list:",this.selection),null):this.selection.offsetHeight||0},i.Selector.width=function(){return this.selection instanceof window.NodeList?(console.warn("Unable to find width for list:",this.selection),null):this.selection.offsetWidth||0},i.Selector.offset=function(){if(this.selection instanceof window.NodeList)console.warn("Unable to find offset for list:",this.selection);else if(this.selection.getBoundingClientRect){var e=this.selection.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}return{top:null,left:null}},i.Selector.parent=function(){return this.selection instanceof window.NodeList?(console.warn("Unable to find offset for list:",this.selection),null):i(this.selection.parentNode)},i.Internals.Loader=function(e,n,o){if(void 0===e){var s=i("body");(e=s.attr("data-loaded")?null:"[data-entity],[data-plugin]")?s.attr("data-loaded",!0):console.warn("Attempting to load Stratus root repeatedly!")}return e&&(e=n&&e&&"object"==typeof e?i(e).find("[data-type],[data-plugin]"):i(e)),new Promise(function(s,r){var a={total:e&&"object"==typeof e?e.length:0,iteration:0,views:{}};a.total>0?e.each(function(e,l,c){a.iteration++;var u=t.uniqueId("entry_");a.views[u]=!1,i.Internals.ViewLoader(e,n,o).then(function(e){a.views[u]=e,a.total===a.iteration&&t.allTrue(a.views)&&s(a)},r)}):s(a)})},i.Internals.View=t.inherit(i.Prototypes.Model,{toObject:function(){var e=t.clone(this.data);return e.el&&e.el.selection&&(e.el=e.el.selection,"function"==typeof $&&$.fn&&(e.$el=$(e.el))),e},hydrate:function(){var e=this.get("el");if(this.set({uid:t.uniqueId("view_"),guid:void 0!==e.attr("data-guid")?e.attr("data-guid"):null,entity:void 0!==e.attr("data-entity")?t.ucfirst(e.attr("data-entity")):null,id:void 0!==e.attr("data-id")?e.attr("data-id"):null,manifest:void 0!==e.attr("data-manifest")?e.attr("data-manifest"):null,api:void 0!==e.attr("data-api")?e.attr("data-api"):null,fetch:void 0===e.attr("data-fetch")||e.attr("data-fetch"),target:void 0!==e.attr("data-target")?e.attr("data-target"):null,prototype:void 0!==e.attr("data-prototype")?e.attr("data-prototype"):null,autoSave:void 0!==e.attr("data-autoSave")?e.attr("data-autoSave"):null,type:void 0!==e.attr("data-type")?e.attr("data-type"):null,types:void 0!==e.attr("data-types")?e.attr("data-types"):null,template:void 0!==e.attr("data-template")?e.attr("data-template"):null,templates:void 0!==e.attr("data-templates")?e.attr("data-templates"):null,dialogue:void 0!==e.attr("data-dialogue")?e.attr("data-dialogue"):null,pagination:void 0!==e.attr("data-pagination")?e.attr("data-pagination"):null,property:void 0!==e.attr("data-property")?e.attr("data-property"):null,field:void 0!==e.attr("data-field")?e.attr("data-field"):null,load:void 0!==e.attr("data-load")?e.attr("data-load"):null,options:void 0!==e.attr("data-options")?e.attr("data-options"):null,versionEntity:void 0!==e.attr("data-versionentity")?e.attr("data-versionentity"):null,versionRouter:void 0!==e.attr("data-versionrouter")?e.attr("data-versionrouter"):null,versionId:void 0!==e.attr("data-versionid")?e.attr("data-versionid"):null,plugin:void 0!==e.attr("data-plugin")?e.attr("data-plugin"):null,plugins:[]}),null!==this.get("plugin")){var n=this.get("plugin").split(" ");null!==this.get("type")?this.set("plugins",n.length>1?n:[this.get("plugin")]):n.length>1&&(this.set("plugin",t.first(n)),this.set("plugins",t.rest(n)))}var i=this.get("id"),o=null!==this.get("type")?this.get("type"):this.get("plugin"),s=null!==this.get("type")?"widgets":"plugins";this.set({scope:null!==i?"model":"collection",alias:null!==o?"stratus.views."+s+"."+o.toLowerCase():null,path:null!==o?o:null}),i||null===this.get("entity")||null===this.get("manifest")||this.set("scope","model")},clean:function(){this.get("entity")&&"none"!==this.get("entity").toLowerCase()||this.set({entity:null,scope:null})},nest:function(){var e={entity:this.get("entity"),id:this.get("id"),versionEntity:this.get("versionEntity"),versionRouter:this.get("versionRouter"),versionId:this.get("versionId"),scope:this.get("scope"),manifest:this.get("manifest")};return this.has(e.scope)&&(e[e.scope]=this.get(e.scope)),e},modelAttributes:function(){return{id:this.get("id")}}}),i.Internals.ViewLoader=function(e,n,o){var s=n||null,r=!1,a=i(e);if((n=new i.Internals.View).set("el",a),n.hydrate(),s&&(n.has("entity")?r=!0:n.set(s.nest())),n.clean(),!r){void 0===o&&(o=["stratus"]);var l=n.get("template"),c=n.get("templates"),u=n.get("dialogue"),d=[];if(null!==n.get("scope")&&o.push("stratus."+n.get("scope")+"s.generic"),n.get("alias")&&t.has(requirejs.s.contexts._.config.paths,n.get("alias")))o.push(n.get("alias"));else if(n.get("path")){o.push(n.get("path"));var h=/(?=[^\/]*$)([a-zA-Z]+)/i.exec(n.get("path"));n.set("type",t.ucfirst(h[1]))}else n.set({type:null,alias:null,path:null});if(null!==l&&(c=t.extend(null!==c?c:{},{combined:l})),null!==u&&(c=t.extend(null!==c?c:{},{dialogue:u})),null!==c){for(var f in c)if(c.hasOwnProperty(f)&&"function"!=typeof c[f])if(0===c[f].indexOf("#")){var p=$(c[f]);p.length>0&&(c[f]=p.html())}else c[f],requirejs.s.contexts._.config.paths,o.push("text!"+c[f]),d.push(f);n.set("templates",c),c=n.get("templates")}}return new Promise(function(e,s){return n.get("guid")?(i.Environment.get("production")||console.warn("View hydration halted on",n.get("guid"),"due to repeat calls on the same element.",n.toObject()),e(!0),!0):r?(e(!0),!0):void require(o,function(i){!i.Environment.get("production")&&i.Environment.get("nestDebug")&&console.group("Stratus View");var r=0;if(c&&d.length>0)for(var a=0;a<arguments.length;a++)"string"==typeof arguments[a]&&(-1===arguments[a].indexOf("<html")?c[d[r]]=arguments[a]:console.error("Template",c[d[r]],"failed to load."),r++);n.set("templates",c),c=n.get("templates");var l=[];if(t.size(c)>0){var u=/<.+?data-type=["|'](.+?)["|'].*>/gi;t.each(c,function(e,o){if("string"==typeof e){if(-1!==e.search(u))for(var s=u.exec(e);null!==s;){var r="stratus.views."+(n.get("plugin")?"plugins":"widgets")+"."+s[1].toLowerCase();r&&!t.has(requirejs.s.contexts._.config.paths,r)&&(i.Environment.get("production")||console.warn("Sub Type:",r,"not configured in require.js")),l.push(r),s=u.exec(e)}c[o]=t.template(e)}}),n.set("templates",c),c=n.get("templates")}n.get("plugins").length&&t.each(n.get("plugins"),function(e){l.push("stratus.views.plugins."+e.toLowerCase())});var h=[];null!==n.get("plugin")&&h.push("PluginLoader"),null!==n.get("type")&&h.push("WidgetLoader"),h.length||h.push("WidgetLoader"),t.each(h,function(r){0===t.size(l)?i.Internals[r](e,s,n,o):(o=t.union(o,l),new Promise(function(e,t){require(o,function(i){i.Internals[r](e,t,n,o)})}).then(e,s))})})})},i.Internals.WidgetLoader=function(e,n,o,s){if("model"===o.get("scope")){var r,a;i.Models.has(o.get("entity"))||i.Models.set(o.get("entity"),i.Models.Generic.extend({}));var l=!1,c=i.Models.has(o.get("entity"))?i.Models.get(o.get("entity")):null;!o.get("id")&&o.get("manifest")?(a=o.get("entity")+"Manifest",(r=i.Instances[a])||(i.Instances[a]=new c,r=i.Instances[a],l=!0)):c&&t.has(c,"findOrCreate")?(r=c.findOrCreate(o.get("id")))||(r=new c(o.modelAttributes()),l=!0):(a=o.get("entity")+o.get("id"),(r=i.Instances[a])||(i.Instances[a]=new c(o.modelAttributes()),r=i.Instances[a],l=!0)),l&&r.safeInitialize(o.toObject()),o.set({model:r})}else if("collection"===o.get("scope")){i.Collections.has(o.get("entity"))||i.Collections.set(o.get("entity"),new i.Collections.Generic(o.toObject()));var u=i.Collections.get(o.get("entity"));!u.initialized&&o.get("fetch")&&u.safeInitialize(o.toObject()),o.set({collection:u})}if(null!==o.get("type")){var d=t.ucfirst(o.get("type"));if(void 0!==i.Views.Widgets[d]){var h=o.toObject();h.view=o,i.Instances[o.get("uid")]=new i.Views.Widgets[d](h),i.Instances[o.get("uid")].$el.attr("data-guid",o.get("uid")),t.has(i.Instances[o.get("uid")],"promise")?i.Instances[o.get("uid")].initializer.then(e,n):e(i.Instances[o.get("uid")])}else i.Environment.get("production")||console.warn("Stratus.Views.Widgets."+d+" is not correctly configured."),n(new i.Prototypes.Error({code:"WidgetLoader",message:"Stratus.Views.Widgets."+d+" is not correctly configured."},o.toObject()));!i.Environment.get("production")&&i.Environment.get("nestDebug")&&console.groupEnd()}else{var f=o.get("el").find("[data-type],[data-plugin]");f.length>0?i.Internals.Loader(o.get("el"),o,s).then(function(t){!i.Environment.get("production")&&i.Environment.get("nestDebug")&&console.groupEnd(),e(t)},function(e){!i.Environment.get("production")&&i.Environment.get("nestDebug")&&console.groupEnd(),n(new i.Prototypes.Error(e,f))}):!i.Environment.get("production")&&i.Environment.get("nestDebug")?(console.warn("No Innate or Nested Type Found:",o.toObject()),e(o.toObject()),console.groupEnd()):e(o.toObject())}},i.Internals.PluginLoader=function(e,n,o,s){var r=t.union([o.get("plugin")],o.get("plugins"));t.each(r,function(s){if(s=t.ucfirst(s),void 0!==i.Views.Plugins[s]){var r=o.toObject();r.view=o,i.Instances[o.get("uid")]=new i.Views.Plugins[s](r),i.Instances[o.get("uid")].$el.attr("data-guid",o.get("uid")),t.has(i.Instances[o.get("uid")],"promise")?i.Instances[o.get("uid")].initializer.then(e,n):e(i.Instances[o.get("uid")])}else i.Environment.get("production")||console.warn("Stratus.Views.Plugins."+s+" is not correctly configured."),n(new i.Prototypes.Error({code:"PluginLoader",message:"Stratus.Views.Plugins."+s+" is not correctly configured."},o.toObject()))})},i.Loaders.Angular=function(){var e,n,o,s={requirement:[],module:[],stylesheet:[]},r=function(e){e=e||{},t.each(e,function(e,n){s[n]=s[n]||[],t.isArray(e)?t.each(e,function(e){s[n].push(e)}):s[n].push(e)})};t.each(i.Roster,function(i,a){if("object"==typeof i&&i)if(t.isUndefined(i.selector)&&i.namespace&&(i.selector=t.filter(t.map(requirejs.s.contexts._.config.paths,function(e,n){return t.startsWith(n,i.namespace)?("attribute"===i.type?"[":"")+t.camelToHyphen(n.replace(i.namespace,"stratus-"))+("attribute"===i.type?"]":""):null}))),t.isArray(i.selector))i.length=0,t.each(i.selector,function(s){if(n=document.querySelectorAll(s),i.length+=n.length,n.length){var a=s.replace(/^\[/,"").replace(/]$/,"");e=i.namespace+t.lcfirst(t.hyphenToCamel(a.replace(/^stratus/,"").replace(/^ng/,""))),t.has(requirejs.s.contexts._.config.paths,e)&&(o={requirement:e},i.module&&(o.module=t.isString(i.module)?i.module:t.lcfirst(t.hyphenToCamel(a+(i.suffix||"")))),r(o))}});else if(t.isString(i.selector)&&(n=document.querySelectorAll(i.selector),i.length=n.length,n.length)){var l=i.selector.replace(/^\[/,"").replace(/]$/,"");i.namespace?t.each(n,function(n){var o=n.getAttribute(l);o&&(e=i.namespace+t.lcfirst(t.hyphenToCamel(o.replace("Stratus",""))),t.has(requirejs.s.contexts._.config.paths,e)&&r({requirement:e}))}):i.require&&(s.requirement=t.union(s.requirement,i.require),o={},i.module&&(o.module=t.isString(i.module)?i.module:t.lcfirst(t.hyphenToCamel(l+(i.suffix||"")))),i.stylesheet&&(o.stylesheet=i.stylesheet),r(o))}}),s.requirement.push("angular-material"),t.each(s,function(e,n){s[n]=t.uniq(e)}),window.container=s,s.requirement.length&&(Object.keys(requirejs.s.contexts._.config.paths).filter(function(e){return t.startsWith(e,"stratus.filters.")}).forEach(function(e){s.requirement.push(e)}),require(s.requirement,function(){if(angular.module("stratusApp",t.union(Object.keys(i.Modules),s.module)).config(["$sceDelegateProvider",function(e){var n=["self","http://*.sitetheory.io/**","https://*.sitetheory.io/**"];boot.host&&(t.startsWith(boot.host,"//")?t.each(["https:","http:"],function(e){n.push(e+boot.host+"/**")}):n.push(boot.host+"/**")),e.resourceUrlWhitelist(n)}]),"function"==typeof $&&$.fn&&$.FroalaEditor){$.FroalaEditor.DEFAULTS.key=i.Api.Froala;var e=["bold","italic","underline","strikeThrough","subscript","superscript","|","formatBlock","blockStyle","inlineStyle","paragraphStyle","paragraphFormat","align","formatOL","formatUL","outdent","indent","|","insertLink","insertImage","insertVideo","insertFile","insertTable","|","undo","redo","removeFormat","wordPaste","help","html","fullscreen"];angular.module("stratusApp").value("froalaConfig",{codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:"['p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'pre', 'ul', 'ol', 'table', 'dl']",brace_style:"expand",indent_char:" ",indent_size:4,wrap_line_length:0},codeMirror:!0,codeMirrorOptions:{indentWithTabs:!1,lineNumbers:!0,lineWrapping:!0,mode:"text/html",tabMode:"space",tabSize:4},fileUploadURL:"https://app002.sitetheory.io:3000/?session="+t.cookie("SITETHEORY"),htmlAllowedAttrs:[".*"],htmlAllowedEmptyTags:["textarea","a",".fa","iframe","object","video","style","script","div"],htmlAllowedTags:[".*"],htmlRemoveTags:[""],htmlUntouched:!0,imageManagerPageSize:20,imageManagerScrollOffset:10,imageManagerLoadURL:"/Api/Media?payload-only=true",imageManagerLoadMethod:"GET",imageManagerDeleteMethod:"DELETE",multiLine:!0,pasteDeniedAttrs:[""],pasteDeniedTags:[""],pastePlain:!1,toolbarSticky:!1,toolbarButtons:e,toolbarButtonsMD:e,toolbarButtonsSM:e,toolbarButtonsXS:e})}t.each(i.Services,function(e){angular.module("stratusApp").config(e)}),t.each(i.Components,function(e,n){angular.module("stratusApp").component("stratus"+t.ucfirst(n),e)}),t.each(i.Directives,function(e,n){angular.module("stratusApp").directive("stratus"+t.ucfirst(n),e)}),t.each(i.Filters,function(e,n){angular.module("stratusApp").filter(t.lcfirst(n),e)}),t.each(i.Controllers,function(e,t){angular.module("stratusApp").controller(t,e)});var n=s.stylesheet,o=i("link[satisfies]").map(function(e){return e.getAttribute("satisfies")});if(t.contains(o,"angular-material.css")||n.push(i.BaseUrl+i.BundlePath+"bower_components/angular-material/angular-material"+(i.Environment.get("production")?".min":"")+".css"),(i("[froala]").length||i.Directives.Froala)&&[i.BaseUrl+"sitetheorycore/css/sitetheory.codemirror.css",i.BaseUrl+i.BundlePath+"bower_components/codemirror/lib/codemirror.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/froala_editor.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/froala_style.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/code_view.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/draggable.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/file.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/fullscreen.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/help.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/image.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/image_manager.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/quick_insert.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/special_characters.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/table.min.css",i.BaseUrl+i.BundlePath+"bower_components/froala-wysiwyg-editor/css/plugins/video.min.css"].forEach(function(e){n.push(e)}),n.length){var r=0;t.each(n,function(e){i.Internals.CssLoader(e).then(function(){++r===n.length&&angular.bootstrap(document.querySelector("html"),["stratusApp"])})})}else angular.bootstrap(document.querySelector("html"),["stratusApp"])}))},i.Instances.Clean=function(e){if(void 0===e?console.error("Stratus.Instances.Clean() requires a string or array containing Unique ID(s)."):"string"==typeof e&&(e=[e]),"object"!=typeof e||!Array.isArray(e))return!1;t.each(e,function(e){t.has(i.Instances,e)&&("function"==typeof i.Instances[e].remove&&i.Instances[e].remove(),delete i.Instances[e])})},i.Chronos=t.extend(new i.Prototypes.Model,{initialize:function(e){i.Environment.get("production")||console.info("Chronos Invoked!"),this.on("change",this.synchronize,this)},synchronize:function(){t.each(this.changed,function(e,n){"string"==typeof n&&-1!==n.indexOf(".")&&(n=t.first(n.split(".")),e=this.get(n)),!e.code&&e.enabled?e.code=setInterval(function(e){e.method.call(e.scope)},1e3*e.time,e):e.code&&!e.enabled&&(clearInterval(e.code),e.code=0)},this)},add:function(e,n,o){var s=null,r=new i.Prototypes.Job(e,n,o);return null!==r.time&&"function"==typeof r.method&&(s=t.uniqueId("job_"),this.set(s,r),i.Instances[s]=r),s},enable:function(e){var t=this.has(e);return t&&this.set(e+".enabled",!0),t},disable:function(e){var t=this.has(e);return t&&this.set(e+".enabled",!1),t},toggle:function(e,t){var n=this.has(e);return n&&this.set(e+".enabled","boolean"==typeof t?t:!this.get(e+".enabled")),n}}),i.Chronos.reinitialize(),i.PostMessage.Convoy=function(e){window.addEventListener("message",function(n){if("https://auth.sitetheory.io"!==n.origin)return!1;e(t.isJSON(n.data)?JSON.parse(n.data):{})},!1)},i.PostMessage.Convoy(function(e){var n=t.cookie("sso");(n=null===n||!!t.isJSON(n)&&JSON.parse(n))&&e&&e.meta&&e.meta.session&&e.meta.session!==t.cookie("SITETHEORY")&&(t.cookie({name:"SITETHEORY",value:e.meta.session,expires:"1w"}),i.Client.safari||window.location.reload(!0))}),i.LocalStorage.Listen=function(e,t){window.addEventListener("storage",function(n){n.key===e&&t(n)},!1)},i.LocalStorage.Listen("stratus-core",function(e){console.log("LocalStorage:",e)}),i.DOM.ready=function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},i.DOM.complete=function(e){"complete"===document.readyState?e():window.addEventListener("load",e)},i.DOM.unload=function(e){window.addEventListener("beforeunload",e)},i.Key.Enter=13,i.Key.Escape=27,i.Events.on("initialize",function(){i.Environment.get("production")||(console.groupEnd(),console.group("Stratus Initialize")),i.Internals.LoadEnvironment(),i.Internals.Compatibility(),i.RegisterGroup=new i.Prototypes.Model,i.Internals.TrackLocation(),i.Loaders.Angular(),i.Internals.Loader().then(function(e){i.Environment.get("production")||console.info("Views:",e),window.views=e,i.Events.on("finalize",function(e){"undefined"==typeof Backbone||Backbone.History.started||Backbone.history.start(),i.Events.trigger("finalized",e)}),i.Events.trigger("finalize",e)},function(e){console.error("Stratus Loader:",e)})}),i.Events.on("finalize",function(){if(i.Environment.get("production")||(console.groupEnd(),console.group("Stratus Finalize")),"object"==typeof Backbone){i.Internals.Anchor.initialize&&(i.Internals.Anchor=i.Internals.Anchor());var e=new i.Internals.Anchor;i.Environment.get("production")||console.log("Anchor:",e)}i.RegisterGroup.size()&&i.RegisterGroup.each(function(e,n){t.has(i.Internals,n)&&i.Internals[n](e)})}),i.Events.on("terminate",function(){i.Environment.get("production")||(console.groupEnd(),console.group("Stratus Terminate"))}),i.Events.on("alert",function(e,t){e instanceof i.Prototypes.Bootbox||(e=new i.Prototypes.Bootbox(e,t)),"undefined"!=typeof bootbox?bootbox.alert(e.message,e.handler):(window.alert(e.message),e.handler())}),i.Events.on("confirm",function(e,t){e instanceof i.Prototypes.Bootbox||(e=new i.Prototypes.Bootbox(e,t)),"undefined"!=typeof bootbox?bootbox.confirm(e.message,e.handler):t(window.confirm(e.message))}),i.Events.on("notification",function(e,n){var o,s={};e&&"object"==typeof e?(t.extend(s,e),s.message=s.message||"Message"):s.message=e||"Message",s.title=s.title||n||"Stratus",s.icon=s.icon||"https://avatars0.githubusercontent.com/u/15791995?v=3&s=200","Notification"in window?"granted"===window.Notification.permission?(o=new window.Notification(s.title,{body:s.message,icon:s.icon}),i.Environment.get("production")||console.log(o)):"denied"!==window.Notification.permission&&window.Notification.requestPermission(function(e){"granted"===e&&(o=new window.Notification(s.title,{body:s.message,icon:s.icon}),i.Environment.get("production")||console.log(o))}):console.info("This browser does not support desktop notifications.  You should switch to a modern browser.")}),i.Events.on("toast",function(e,t,n,o){e instanceof i.Prototypes.Toast||(e=new i.Prototypes.Toast(e,t,n,o)),i.Environment.get("production")||console.log("Toast:",e),"undefined"!=typeof $&&$.toaster?$.toaster(e):i.Events.trigger("alert",e.message)}),i.DOM.ready(function(){i("body").removeClass("loaded unloaded").addClass("loading"),i.Events.trigger("initialize")}),i.DOM.complete(function(){i("body").removeClass("loading unloaded").addClass("loaded")}),i.DOM.unload(function(e){i("body").removeClass("loading loaded").addClass("unloaded"),i.Events.trigger("terminate",e)}),i});