<h1 mat-dialog-title>Media Selector</h1>

<div mat-dialog-content class="media-dialog-content">
    <!-- Target Editor -->
    <form class="dialog-form" [formGroup]='dialogMediaForm'>
        <mat-form-field class="form-field">
            <input matInput placeholder="Search Media" aria-label="Search Media" formControlName='mediaQueryInput'>
        </mat-form-field>
    </form>
    <mat-progress-bar mode="indeterminate" *ngIf="isMediaLoading"></mat-progress-bar>
    <mat-grid-list cols="3" rowHeight="2:1">
        <ng-container *ngFor="let mediaEntity of mediaEntities">
            <mat-grid-tile *ngIf="mediaEntity.thumbSrc !== null">
                <img [src]="mediaEntity.thumbSrc"
                     [alt]="mediaEntity.name"
                     [style.cursor]="'pointer'"
                     [ngClass]="{'selected' : isSelected(mediaEntity)}"
                     (click)="select(mediaEntity)">
            </mat-grid-tile>
            <!--
            <mat-grid-tile *ngIf="mediaEntity.thumbSrc !== null">
                <span [innerText]="mediaEntity | json"></span>
            </mat-grid-tile>
            -->
        </ng-container>
    </mat-grid-list>
    <!-- Pagination is based on the latest Convoy Meta -->
    <mat-paginator [length]="(!meta || !meta.pagination) ? mediaEntities.length : (meta.pagination.countTotal || mediaEntities.length)"
                   [pageSize]="(!meta || !meta.pagination) ? limit : (meta.pagination.limit || limit)"
                   [pageSizeOptions]="[5, 10, 25, 50, 100]"
                   (page)="onPage($event)">
    </mat-paginator>
</div>
