<!-- show progress while initializing -->
<!--
<mat-progress-bar mode="indeterminate" *ngIf="!isStyled || !isInitialized"></mat-progress-bar>
-->

<div class="tree-node-content"
     *ngIf="isInitialized && isStyled">

    <!-- use a disabled button to provide padding for tree leaf -->
    <button mat-icon-button
            *ngIf="!hasChild(node)"
            disabled></button>

    <!-- use a regular button to control expandable nodes -->
    <button mat-icon-button
            *ngIf="hasChild(node)"
            (click)="toggleExpandedClick(node)"
            (dblclick)="toggleExpandedDblClick(node)"
            [attr.aria-label]="'toggle ' + getName(node)">
        <mat-icon class="mat-icon-rtl-mirror">
            {{isExpanded(node) ? 'expand_more' : 'chevron_right'}}
        </mat-icon>
    </button>

    <!-- clickable name is also the drag handle -->
    <span cdkDragHandle
          [innerHTML]="getName(node)"
          (click)="openDialogClick(node)"
          (dblclick)="openDialogDblClick(node)"></span>

    <!-- drag preview is all that is viewable when dragging -->
<!--    <span cdkDragPreview-->
<!--          [innerHTML]="getDragPreview(node)"-->
<!--          class="tree-node-drag-preview"></span>-->

    <!-- drag placeholder is displayed in place of the element being dragged -->
<!--    <span cdkDragPlaceholder-->
<!--          [innerHTML]="getDragPreview(node)"-->
<!--          class="tree-node-drag-placeholder"></span>-->

    <!-- create drop list -->
    <div cdkDropList
         [id]="tree.uid + '_node_' + node.id + '_drop_list'"
         [cdkDropListConnectedTo]="tree.dropLists"
         [cdkDropListData]="node"
         [cdkDropListDisabled]="false"
         (cdkDropListDropped)="tree.onDragDrop($event)"
         class="tree-node-drop-list">
        <!-- display children for expandable nodes -->
        <div [class.display-none]="!isExpanded(node) && hasChild(node)">
            <sa-tree-node cdkDrag
                          *ngFor="let child of node.children"
                          [cdkDragData]="child"
                          [tree]="tree"
                          [parent]="node"
                          [node]="child"
                          class="tree-node"></sa-tree-node>
        </div>
    </div>
</div>
