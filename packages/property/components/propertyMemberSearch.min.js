!function(e,t){"function"==typeof define&&define.amd?define(["stratus","lodash","angular","stratus.services.propertyLoopback","stratus.components.propertyMemberList"],t):t(e.Stratus,e._,e.angular,e.moment)}(this,(function(e,t,n){const o=e.Environment.get("production")?".min":"";e.Components.PropertyMemberSearch={bindings:{elementId:"@",listId:"@",listLinkUrl:"@",listLinkTarget:"@",options:"@",template:"@",variableSync:"@"},controller:["$scope","$attrs","$window","$timeout","$mdDialog","$q","$mdPanel","propertyLoopback",function(r,s,i,a,l,c,p,u){this.uid=t.uniqueId("property_member_search_"),e.Instances[this.uid]=r,r.elementId=s.elementId||this.uid,e.Internals.CssLoader(e.BaseUrl+"content/property/stratus/components/propertyMemberSearch"+o+".css"),this.$onInit=function(){r.listId=s.listId||null,r.listInitialized=!1,r.listLinkUrl=s.listLinkUrl||"/property/member/list",r.listLinkTarget=s.listLinkTarget||"_self",r.options=s.options&&t.isJSON(s.options)?JSON.parse(s.options):{},r.options.query=r.options.query||{},r.options.tokenUrl&&u.setTokenURL(r.options.tokenUrl),u.registerSearchInstance(r.elementId,r,r.listId,"Member")},r.updateScopeValuePath=async function(e,t){const n=e.split(".");return r.updateNestedPathValue(r,n,t)},r.updateNestedPathValue=async function(e,n,o){const s=n.shift();return s&&Object.prototype.hasOwnProperty.call(e,s)?n[0]?r.updateNestedPathValue(e[s],n,o):(t.isArray(e[s])&&!t.isArray(o)&&(o=""===o?[]:o.split(",")),e[s]=o,o):null},r.getInput=function(e){return n.element(document.getElementById(e))},r.variableSync=async function(){r.variableSyncing=s.variableSync&&t.isJSON(s.variableSync)?JSON.parse(s.variableSync):{};const e=[];Object.keys(r.variableSyncing).forEach((function(t){e.push(c((async function(e,n){const o=r.getInput(t);if(o){const e=r.variableSyncing[t];await r.updateScopeValuePath(e,o.val()),r.$watch(e,(function(e){o.val(e)}),!0)}e()})))})),await c.all(e)},r.searchMembers=function(){let e;r.listId&&(e=u.getListInstance(r.listId,"Member")),e?(r.options.query.Page=1,e.searchMembers(r.options.query,!0)):(console.log("displaying popup"),r.displayMemberSelector())},r.displayMemberSelector=function(){const e={options:{},template:"mothership/propertyMemberSelector","variable-sync":JSON.stringify({agent_fname:"MemberFirstName",agent_lname:"MemberLastName",agent_license:"MemberStateLicense",office_name:"OfficeName",office_id:"OfficeKey"})};if(r.options.query){const t={service:[r.options.service||0],where:r.options.query};e.options=JSON.stringify(t)}let t='<md-dialog aria-label="Property Member Selector" class="transparent"><md-button style="text-align: center" ng-click="ctrl.close()">Close and Accept</md-button><stratus-property-member-list ';Object.keys(e).forEach((function(n){Object.prototype.hasOwnProperty.call(e,n)&&(t+=n+"='"+e[n]+"' ")})),t+="></stratus-property-member-list></md-dialog>",l.show({template:t,parent:n.element(document.body),clickOutsideToClose:!0,fullscreen:!0,controllerAs:"ctrl",controller:function(e,t){const n=this;function o(){t&&t.hide()}n.$onInit=function(){n.close=o}}}).then((function(){}),(function(){}))}}],templateUrl:function(t,n){return e.BaseUrl+"content/property/stratus/components/"+(n.template||"propertyMemberSearch")+o+".html"}}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJTdHJhdHVzIiwiXyIsImFuZ3VsYXIiLCJtb21lbnQiLCJ0aGlzIiwibWluIiwiRW52aXJvbm1lbnQiLCJnZXQiLCJDb21wb25lbnRzIiwiUHJvcGVydHlNZW1iZXJTZWFyY2giLCJiaW5kaW5ncyIsImVsZW1lbnRJZCIsImxpc3RJZCIsImxpc3RMaW5rVXJsIiwibGlzdExpbmtUYXJnZXQiLCJvcHRpb25zIiwidGVtcGxhdGUiLCJ2YXJpYWJsZVN5bmMiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJGF0dHJzIiwiJHdpbmRvdyIsIiR0aW1lb3V0IiwiJG1kRGlhbG9nIiwiJHEiLCIkbWRQYW5lbCIsInByb3BlcnR5TG9vcGJhY2siLCJ1aWQiLCJ1bmlxdWVJZCIsIkluc3RhbmNlcyIsIkludGVybmFscyIsIkNzc0xvYWRlciIsIkJhc2VVcmwiLCIkb25Jbml0IiwibGlzdEluaXRpYWxpemVkIiwiaXNKU09OIiwiSlNPTiIsInBhcnNlIiwicXVlcnkiLCJ0b2tlblVybCIsInNldFRva2VuVVJMIiwicmVnaXN0ZXJTZWFyY2hJbnN0YW5jZSIsInVwZGF0ZVNjb3BlVmFsdWVQYXRoIiwiYXN5bmMiLCJzY29wZVZhclBhdGgiLCJ2YWx1ZSIsInNjb3BlUGllY2VzIiwic3BsaXQiLCJ1cGRhdGVOZXN0ZWRQYXRoVmFsdWUiLCJjdXJyZW50TmVzdCIsInBhdGhQaWVjZXMiLCJjdXJyZW50UGllY2UiLCJzaGlmdCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImlzQXJyYXkiLCJnZXRJbnB1dCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidmFyaWFibGVTeW5jaW5nIiwicHJvbWlzZXMiLCJrZXlzIiwiZm9yRWFjaCIsInB1c2giLCJyZXNvbHZlIiwicmVqZWN0IiwidmFyRWxlbWVudCIsInZhbCIsIiR3YXRjaCIsImFsbCIsInNlYXJjaE1lbWJlcnMiLCJsaXN0U2NvcGUiLCJnZXRMaXN0SW5zdGFuY2UiLCJQYWdlIiwiY29uc29sZSIsImxvZyIsImRpc3BsYXlNZW1iZXJTZWxlY3RvciIsInRlbXBsYXRlT3B0aW9ucyIsInZhcmlhYmxlLXN5bmMiLCJzdHJpbmdpZnkiLCJhZ2VudF9mbmFtZSIsImFnZW50X2xuYW1lIiwiYWdlbnRfbGljZW5zZSIsIm9mZmljZV9uYW1lIiwib2ZmaWNlX2lkIiwic2VydmljZSIsIndoZXJlIiwib3B0aW9uS2V5Iiwic2hvdyIsInBhcmVudCIsImJvZHkiLCJjbGlja091dHNpZGVUb0Nsb3NlIiwiZnVsbHNjcmVlbiIsImNvbnRyb2xsZXJBcyIsImRjIiwiY2xvc2UiLCJoaWRlIiwidGhlbiIsInRlbXBsYXRlVXJsIiwiJGVsZW1lbnQiXSwibWFwcGluZ3MiOiJDQW9CQSxTQUFXQSxFQUFNQyxHQUNPLG1CQUFYQyxRQUF5QkEsT0FBT0MsSUFDekNELE9BQU8sQ0FBQyxVQUNSLFNBQVUsVUFBVyxvQ0FBcUMseUNBQ3ZERCxHQUVIQSxFQUFRRCxFQUFLSSxRQUFTSixFQUFLSyxFQUFHTCxFQUFLTSxRQUFTTixFQUFLTyxRQU5yRCxDQVFHQyxNQUFNLFNBQVVKLEVBQVNDLEVBQUdDLEdBQzdCLE1BQU1HLEVBQU1MLEVBQVFNLFlBQVlDLElBQUksY0FBZ0IsT0FBUyxHQUM3RFAsRUFBUVEsV0FBV0MscUJBQXVCLENBQ3hDQyxTQUFVLENBQ1JDLFVBQVcsSUFDWEMsT0FBUSxJQUNSQyxZQUFhLElBQ2JDLGVBQWdCLElBQ2hCQyxRQUFTLElBQ1RDLFNBQVUsSUFDVkMsYUFBYyxLQUVoQkMsV0FBWSxDQUFDLFNBQVUsU0FBVSxVQUFXLFdBQVksWUFBYSxLQUFNLFdBQVksbUJBQW9CLFNBQVVDLEVBQVFDLEVBQVFDLEVBQVNDLEVBQVVDLEVBQVdDLEVBQUlDLEVBQVVDLEdBRWpLdEIsS0FDUnVCLElBQU0xQixFQUFFMkIsU0FBUywyQkFDdkI1QixFQUFRNkIsVUFGTXpCLEtBRVV1QixLQUFPUixF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