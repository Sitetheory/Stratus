
<div id="{{elementId}}" class="idx-search-component search-full font-primary"
     data-ng-cloak
     data-ng-init="advancedFiltersStatus = 'closed'"
     data-ng-class="[{'filters-open' : advancedFiltersStatus == 'open'}, {'filters-closed' : advancedFiltersStatus == 'closed'}]">

    <h2 data-ng-show="widgetName" data-ng-bind="widgetName"></h2>
    <!--<div class="search-header">-->
        <!--<h4>Search Filters</h4>-->
        <!--<div class="basic-advanced">-->
            <!--<a class="close-filters-link border-default border-default-right" data-ng-click="advancedFiltersStatus = 'closed'">Basic</a>-->
            <!--<a class="open-filters-link" data-ng-click="advancedFiltersStatus = 'open'">Advanced</a>-->
        <!--</div>-->
    <!--</div>-->

    <div class="search-row search-basic clearfix">

        <div class="search-input search-location">
            <md-input-container class="md-block minimal">
            <label>City, Neighborhood, Zip</label>
            <input data-ng-model="options.query.where.Location" type="text" maxlength="250"
                   data-ng-keyup="$event.keyCode == 13 && options.query.where.Location && searchProperties()"
                   autocomplete="off"
            >
            </md-input-container>
        </div>

        <div class="search-input search-buy-rent">
            <div class="toggle-switch" aria-label="Listings to Buy or Rent" data-layout="row" data-layout-align="center center">
                <div class="option-choice buy" data-ng-class="{inactive: options.forRent}" data-flex>
                    Buy
                </div>

                <md-switch
                        data-ng-model="options.forRent"
                        data-ng-change="selectDefaultListingType()"
                        aria-label="Buy or Rent"
                >
                </md-switch>
                <div class="option-choice rent" data-ng-class="{inactive: !options.forRent}" data-flex>
                    Rent
                </div>
            </div>
        </div>

        <div class="search-input search-min-price">
            <md-input-container class="md-block minimal">
                <label>Min Price</label>
                <input stratus-string-to-number="comma" data-ng-model="options.query.where.ListPriceMin" type="text" maxlength="11" size="8" autocomplete="off">
            </md-input-container>
        </div>

        <div class="search-input search-max-price">
            <md-input-container class="md-block minimal">
                <label>Max Price</label>
                <input stratus-string-to-number="comma" data-ng-model="options.query.where.ListPriceMax" type="text" maxlength="11" size="8" autocomplete="off">
            </md-input-container>
        </div>

        <div class="search-input search-beds">
            <md-input-container class="md-block minimal">
                <label>0+ Beds</label>
                <md-select data-ng-model="options.query.where.Bedrooms">
                    <md-option>0+ Beds</md-option>
                    <md-option data-ng-repeat="option in options.selection.Bedrooms" data-ng-value="option.value">
                        {{option.name}} Beds
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="search-input search-baths">
            <md-input-container class="md-block minimal">
                <label>0+ Baths</label>
                <md-select data-ng-model="options.query.where.Bathrooms">
                    <md-option>0+ Baths</md-option>
                    <md-option data-ng-repeat="option in options.selection.Bathrooms" data-ng-value="option.value">
                        {{option.name}} Baths
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="search-more-filters" data-ng-init="advancedFiltersStatus = false">
            <a class="open-filters-link"
               data-ng-click="advancedFiltersStatus=!advancedFiltersStatus">
                <md-icon md-svg-src="{{ 'sitetheorycore/images/icons/actionButtons/filters.svg' | assetPath }}"></md-icon>
                <span class="btn-text"><span data-ng-show="advancedFiltersStatus != true">More</span><span data-ng-show="advancedFiltersStatus == true">Less</span> Filters</span>
            </a>
        </div>
        <div class="submit-row">
            <a class="btn btn-submit" data-ng-click="searchProperties()">Search</a>
        </div>

    </div>
    <div class="search-row filters-row" data-ng-class="{'open-filters' : advancedFiltersStatus == true}">
        <div>

            <div>
                <div>
                    <div class="stratus-idx-property-search-menu">
                        <div class="toggle-switch" aria-label="Listings to Buy or Rent">
                            <div class="option-choice font-primary" data-ng-class="{inactive: options.forRent}">
                                Buy
                            </div>

                            <md-switch
                                    data-ng-model="options.forRent"
                                    data-ng-change="selectDefaultListingType()"
                                    aria-label="Buy or Rent"
                            >
                            </md-switch>
                            <div class="option-choice font-primary" data-ng-class="{inactive: !options.forRent}">
                                Rent
                            </div>
                        </div>
                        <div class="property-zoning" aria-label="Listing Zoning">
                                <md-button
                                        class="font-primary"
                                        data-ng-class="{'md-primary': options.selection.ListingType.group.Residential}"
                                        data-ng-click="selectDefaultListingType('Residential')"
                                        aria-label="Residential"
                                        data-md-prevent-menu-close
                                >
                                    Residential
                                </md-button>
                                <md-button
                                        class="font-primary"
                                        data-ng-class="{'md-primary': options.selection.ListingType.group.Commercial}"
                                        data-ng-click="selectDefaultListingType('Commercial')"
                                        aria-label="Commercial"
                                        data-md-prevent-menu-close
                                >
                                    Commercial
                                </md-button>
                            </div>
                    </div>

                    <div class="listing-types" aria-label="Listing Types">
                        <md-button
                                data-ng-repeat="listType in ::options.selection.ListingType.All"
                                class="md-raised font-primary"
                                data-ng-show="options.forRent === listType.lease && options.selection.ListingType.group[listType.group]"
                                data-ng-class="{'md-primary': inArray(listType.value, options.query.where.ListingType)}"
                                data-ng-click="toggleArrayElement(listType.value, options.query.where.ListingType)"
                                aria-label="{{::listType.name}}"
                                data-md-prevent-menu-close
                                data-ng-bind="::listType.name"
                        ></md-button>
                    </div>

                </div>

                <div class="stratus-idx-property-search-menu">

                    <div aria-label="Listing Status">
                        <md-button class="font-primary"
                                   data-ng-class="{'md-primary': inArray('Active', options.query.where.Status)}"
                                   data-ng-click="toggleArrayElement('Active', options.query.where.Status)"
                                   aria-label="For Sale"
                                   data-md-prevent-menu-close
                        >
                            For Sale
                        </md-button>
                        <md-button class="font-primary"
                                   data-ng-class="{'md-primary': inArray('Closed', options.query.where.Status)}"
                                   data-ng-click="toggleArrayElement('Closed', options.query.where.Status)"
                                   aria-label="Sold"
                                   data-md-prevent-menu-close
                        >
                            Sold
                        </md-button>
                    </div>

                    <div data-ng-show="!options.forRent && (inArray('Active', options.query.where.Status) || inArray('Contract', options.query.where.Status))">
                        <md-checkbox
                                class="show-under-contract font-secondary"
                                data-ng-checked="inArray('Contract', options.query.where.Status)"
                                data-ng-click="toggleArrayElement('Contract', options.query.where.Status)"
                                aria-label="Under Contract"
                                data-md-prevent-menu-close
                        >
                            Show Under Contract
                        </md-checkbox>
                    </div>

                    <!-- 'Openhouses Only' is only allowed when more filters are supplied due to speed restrictions -->
                    <md-checkbox
                            data-ng-show="options.query.where.Neighborhood.length || options.query.where.Location.length || options.query.where.AgentLicense.length || options.query.where.City.length || options.query.where.CountyOrParish.length || options.query.where.MLSAreaMajor.length || options.query.where.PostalCode.length"
                            class="show-open-houses font-secondary"
                            data-ng-model="options.query.where.OpenHouseOnly"
                            aria-label="Open Houses Only"
                            data-md-prevent-menu-close
                    >
                        Open Houses Only
                    </md-checkbox>
                </div>
            </div>

            <div data-ng-if="options.query.where.City.length || options.query.where.CountyOrParish.length || options.query.where.MLSAreaMajor.length || options.query.where.PostalCode.length">
                <div class="sale-status-border dotted-spaced-underline"></div>
                <h3>Preset Filters</h3>
                <div class="specific-filters" aria-label="Specific Areas">
                    <div class="search-input" data-ng-if="options.query.where.City.length">
                        <md-input-container class="md-block minimal">
                            <label>City</label>
                            <input data-ng-model="options.query.where.City"
                                   type="text"
                                   maxlength="250"
                                   autocomplete="off">
                        </md-input-container>
                    </div>
                    <div class="search-input" data-ng-if="options.query.where.CountyOrParish.length">
                        <md-chips
                                class="area-id font-secondary"
                                aria-label="Counties to Limit"
                                data-ng-model="options.query.where.CountyOrParish"
                                data-md-enable-chip-edit="true"
                                data-md-add-on-blur="true"
                                data-md-separator-keys="[$mdConstant.KEY_CODE.ENTER, $mdConstant.KEY_CODE.COMMA]"
                                data-placeholder="County"
                                data-secondary-placeholder="+County"
                                data-delete-button-label="Remove County"
                                data-delete-hint="Press delete to remove County"
                        ></md-chips>
                    </div>
                    <div class="search-input" data-ng-if="options.query.where.MLSAreaMajor.length">
                        <md-chips
                                class="area-id font-secondary"
                                aria-label="Neighborhoods to Limit"
                                data-ng-model="options.query.where.MLSAreaMajor"
                                data-md-enable-chip-edit="true"
                                data-md-add-on-blur="true"
                                data-md-separator-keys="[$mdConstant.KEY_CODE.ENTER, $mdConstant.KEY_CODE.COMMA]"
                                data-placeholder="Neighborhood"
                                data-secondary-placeholder="+Neighborhood"
                                data-delete-button-label="Remove Neighborhood"
                                data-delete-hint="Press delete to remove Neighborhood"
                        ></md-chips>
                    </div>
                    <div class="search-input" data-ng-if="options.query.where.PostalCode.length">
                        <md-chips
                                class="postal-code font-secondary"
                                aria-label="Postal Code(s) to Limit"
                                data-ng-model="options.query.where.PostalCode"
                                data-md-enable-chip-edit="true"
                                data-md-add-on-blur="true"
                                data-md-separator-keys="[$mdConstant.KEY_CODE.ENTER, $mdConstant.KEY_CODE.COMMA]"
                                data-placeholder="Postal Code"
                                data-secondary-placeholder="+PostalCode"
                                data-delete-button-label="Remove Postal Code"
                                data-delete-hint="Press delete to remove Postal Code"
                        ></md-chips>
                    </div>
                </div>
            </div>

        </div>

        <!-- Only Include if these were preset in a Property Filter pages and we need the ability to remove them
        <div ng-if="options.query.where.City.length || options.query.where.MLSAreaMajor.length || options.PostalCode.length">
            <div class="sale-status-border dotted-spaced-underline"></div>
            <h3 data-layout-align="space-around center">Preset Filters</h3>
            <div class="specific-filters" data-layout="row" data-layout-align="space-around center" aria-label="Specific Areas">
                <div class="search-input" data-ng-if="options.query.where.City.length">
                    <md-input-container class="md-block minimal">
                        <label>City</label>
                        <input data-ng-model="options.query.where.City"
                               type="text"
                               maxlength="250"
                               autocomplete="off">
                    </md-input-container>
                </div>
                <div class="search-input" data-ng-if="options.query.where.MLSAreaMajor.length"
                    <md-chip
                            class="area-id font-secondary
                            aria-label="Neighborhoods to Limit
                            data-ng-model="options.query.where.MLSAreaMajor"-->
                            <!--data-md-enable-chip-edit="true"-->
                            <!--data-md-add-on-blur="true"-->
                            <!--data-md-separator-keys="[$mdConstant.KEY_CODE.ENTER, $mdConstant.KEY_CODE.COMMA]"-->
                            <!--data-placeholder="Neighborhood"-->
                            <!--data-secondary-placeholder="+Neighborhood"-->
                            <!--data-delete-button-label="Remove Neighborhood"-->
                            <!--data-delete-hint="Press delete to remove Neighborhood"-->
                    <!--&gt;</md-chips>-->
                <!--</div>-->
                <!--<div class="search-input" data-ng-if="options.query.where.PostalCode.length">-->
                    <!--<md-chips-->
                            <!--class="postal-code font-secondary"-->
                            <!--aria-label="Postal Code(s) to Limit"-->
                            <!--data-ng-model="options.query.where.PostalCode"-->
                            <!--data-md-enable-chip-edit="true"-->
                            <!--data-md-add-on-blur="true"-->
                            <!--data-md-separator-keys="[$mdConstant.KEY_CODE.ENTER, $mdConstant.KEY_CODE.COMMA]"-->
                            <!--data-placeholder="Postal Code"-->
                            <!--data-secondary-placeholder="+PostalCode"-->
                            <!--data-delete-button-label="Remove Postal Code"-->
                            <!--data-delete-hint="Press delete to remove Postal Code"-->
                    <!--&gt;</md-chips>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->

            <!--<div data-layout="row" data-layout-align="space-around center">-->
                <!--<a class="btn" data-ng-click="searchProperties();filterMenu.close();">Search</a>-->
            <!--</div>-->


        <!--</div>-->
    </div>
</div>
