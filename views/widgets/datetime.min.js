//     Stratus.Views.DateTime.js 1.0
//     Copyright (c) 2016 by Sitetheory, All Rights Reserved
//
//     All information contained herein is, and remains the
//     property of Sitetheory and its suppliers, if any.
//     The intellectual and technical concepts contained herein
//     are proprietary to Sitetheory and its suppliers and may be
//     covered by U.S. and Foreign Patents, patents in process,
//     and are protected by trade secret or copyright law.
//     Dissemination of this information or reproduction of this
//     material is strictly forbidden unless prior written
//     permission is obtained from Sitetheory.
//
//     For full details and documentation:
//     http://docs.sitetheory.io
!function(t,e){"function"==typeof define&&define.amd?define(["stratus","jquery","underscore","moment","promise","datetimepicker","stratus.views.widgets.base"],e):e(t.Stratus,t.$,t._,t.moment)}(this,function(t,e,i,n){t.Views.Widgets.DateTime=t.Views.Widgets.Base.extend({model:t.Models.Generic,template:i.template('{% if (options.inline) { %}<div id="{{ elementId }}"></div>{% } else { %}<div id="{{ elementId }}" class="input-group date"><input type="text" class="form-control"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span></div>{% } %}'),options:{"private":{autoSave:!0,emptyValue:null,customValue:null,requiredCssFile:[t.BaseUrl+"sitetheorycore/dist/bootstrap/bootstrap-datetimepicker.min.less"],dateTimePicker:{inline:!1,sideBySide:!1,useCurrent:!0,showClear:!0,toolbarPlacement:"bottom",widgetPositioning:{horizontal:"auto",vertical:"bottom"}}},"public":{inline:!1,format:"LLL",placeholder:"Click to Add Date"}},dateTimePicker:null,postOptions:function(t){this.getDataOptions(this.options.dateTimePicker),this.options.inline&&(this.options.style="widget")},registerElement:function(){return this.$element&&this.$element.length?(this.$element.datetimepicker(this.options.dateTimePicker),this.dateTimePicker=this.$element.data("DateTimePicker"),this.options.customValue&&this.setValue(this.options.customValue),this.$element.on("dp.show",function(t){this.focusAction(t)}.bind(this)),this.$element.on("dp.hide",function(t){this.blurAction(t)}.bind(this)),this.options.inline||(this.$elementInput=this.$element.find("input"),this.$elementInput.on("focus",function(t){this.focusAction(t)}.bind(this)),this.$elementInput.on("blur",function(t){this.blurAction(t)}.bind(this)),this.$elementInput.on("keydown",function(t){this.keyActions(t)}.bind(this))),!0):!1},getValue:function(){return"object"==typeof this.dateTimePicker&&this.dateTimePicker&&this.dateTimePicker.date()?this.dateTimePicker.date().unix():null},setValue:function(t){if(!t||"object"!=typeof this.dateTimePicker||!this.dateTimePicker)return!1;var e=n.unix(t);return e?this.dateTimePicker.date(e):e},formatDisplayValue:function(t){return t&&this.options.format?n.unix(t).format(this.options.format):t||""}})});