System.register(["@angular/core","@angular/forms","@angular/cdk/drag-drop","rxjs","@angular/platform-browser","@angular/material/icon","stratus","lodash"],function(t,e){"use strict";var n,s,r,i,o,a,c,h,u,d,l,f=this&&this.__decorate||function(t,e,n,s){var r,i=arguments.length,o=i<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(i<3?r(o):i>3?r(e,n,o):r(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},g=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))(function(r,i){function o(t){try{c(s.next(t))}catch(t){i(t)}}function a(t){try{c(s.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(o,a)}c((s=s.apply(t,e||[])).next())})};e&&e.id;return{setters:[function(t){n=t},function(t){s=t},function(t){r=t},function(t){i=t},function(t){o=t},function(t){a=t},function(t){c=t},function(t){h=t}],execute:function(){u="/assets/1/0/bundles/sitetheorystratus/stratus/src/angular","@stratus/angular","selector",d=(t,e)=>h.has(t,e)&&!h.isEmpty(h.get(t,e)),l=class{constructor(t,e,n){this.ref=n,this.title="selector-dnd",this._=h,this.has=d,this.log=console.log,this.selectCtrl=new s.FormControl,this.registry=new c.Data.Registry,this.onChange=new i.Subject,this.uid=h.uniqueId("sa_selector_component_"),c.Instances[this.uid]=this;const r=this;this.sanitizer=e,t.addSvgIcon("delete",e.bypassSecurityTrustResourceUrl("/Api/Resource?path=@SitetheoryCoreBundle:images/icons/actionButtons/delete.svg")),c.Internals.CssLoader(`${u}/selector/selector.component.css`),console.log("inputs:",this.target,this.id,this.manifest,this.api),h.isUndefined(this.target)&&(this.target="Content"),this.dataSub=new i.Observable(t=>this.dataDefer(t)),this.fetchData().then(t=>{t.on?(t.on("change",()=>{r.dataDefer(r.subscriber),n.detectChanges()}),r.dataDefer(r.subscriber),n.detectChanges()):console.warn("Unable to bind data from Registry!")})}drop(t){const e=this.dataRef();if(!e||!e.length)return;r.moveItemInArray(e,t.previousIndex,t.currentIndex);let n=0;h.each(e,t=>t.priority=n++),this.model.trigger("change")}remove(t){const e=this.dataRef();if(!e||!e.length)return;const n=e.indexOf(t);-1!==n&&(e.splice(n,1),this.model.trigger("change"))}fetchData(){return p(this,void 0,void 0,function*(){return this.fetched||(this.fetched=this.registry.fetch(c.Select("#widget-edit-entity"),this)),this.fetched})}dataDefer(t){this.subscriber=t;const e=this.dataRef();e&&e.length?(console.log("pushed models to subscriber."),t.next(e)):setTimeout(()=>{this.dataDefer(t)},500)}dataRef(){if(!this.model)return[];const t=h.get(this.model,"data.version.modules");return t&&h.isArray(t)?t:[]}onDataChange(t){this.dataDefer(this.subscriber),t.detectChanges()}prioritize(){const t=this.dataRef();if(!t||!t.length)return;let e=0;h.each(t,t=>t.priority=e++)}},f([n.Input(),g("design:type",String)],l.prototype,"target",void 0),f([n.Input(),g("design:type",Number)],l.prototype,"id",void 0),f([n.Input(),g("design:type",Boolean)],l.prototype,"manifest",void 0),f([n.Input(),g("design:type",Object)],l.prototype,"api",void 0),f([n.Input(),g("design:type",Object)],l.prototype,"searchQuery",void 0),l=f([n.Component({selector:"sa-selector",templateUrl:`${u}/selector/selector.component.html`,changeDetection:n.ChangeDetectionStrategy.OnPush}),g("design:paramtypes",[a.MatIconRegistry,o.DomSanitizer,n.ChangeDetectorRef])],l),t("SelectorComponent",l)}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hbmd1bGFyL3NlbGVjdG9yL3NlbGVjdG9yLmNvbXBvbmVudC5qcyJdLCJuYW1lcyI6WyJTeXN0ZW0iLCJyZWdpc3RlciIsImV4cG9ydHNfMSIsImNvbnRleHRfMSIsImNvcmVfMSIsImZvcm1zXzEiLCJkcmFnX2Ryb3BfMSIsInJ4anNfMSIsInBsYXRmb3JtX2Jyb3dzZXJfMSIsImljb25fMSIsIlN0cmF0dXMiLCJfIiwibG9jYWxEaXIiLCJoYXMiLCJTZWxlY3RvckNvbXBvbmVudCIsIl9fZGVjb3JhdGUiLCJ0aGlzIiwiZGVjb3JhdG9ycyIsInRhcmdldCIsImtleSIsImRlc2MiLCJkIiwiYyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInIiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJSZWZsZWN0IiwiZGVjb3JhdGUiLCJpIiwiZGVmaW5lUHJvcGVydHkiLCJfX21ldGFkYXRhIiwiayIsInYiLCJtZXRhZGF0YSIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJpZCIsInNldHRlcnMiLCJjb3JlXzFfMSIsImZvcm1zXzFfMSIsImRyYWdfZHJvcF8xXzEiLCJyeGpzXzFfMSIsInBsYXRmb3JtX2Jyb3dzZXJfMV8xIiwiaWNvbl8xXzEiLCJTdHJhdHVzXzEiLCJfMSIsImV4ZWN1dGUiLCJvYmplY3QiLCJwYXRoIiwiaXNFbXB0eSIsImdldCIsIltvYmplY3QgT2JqZWN0XSIsImljb25SZWdpc3RyeSIsInNhbml0aXplciIsInJlZiIsInRpdGxlIiwibG9nIiwiY29uc29sZSIsInNlbGVjdEN0cmwiLCJGb3JtQ29udHJvbCIsInJlZ2lzdHJ5IiwiRGF0YSIsIlJlZ2lzdHJ5Iiwib25DaGFuZ2UiLCJTdWJqZWN0IiwidWlkIiwidW5pcXVlSWQiLCJJbnN0YW5jZXMiLCJ0aGF0IiwiYWRkU3ZnSWNvbiIsImJ5cGFzc1NlY3VyaXR5VHJ1c3RSZXNvdXJjZVVybCIsIkludGVybmFscyIsIkNzc0xvYWRlciIsIm1hbmlmZXN0IiwiYXBpIiwiaXNVbmRlZmluZWQiLCJkYXRhU3ViIiwiT2JzZXJ2YWJsZSIsInN1YnNjcmliZXIiLCJkYXRhRGVmZXIiLCJmZXRjaERhdGEiLCJkYXRhIiwib24iLCJkZXRlY3RDaGFuZ2VzIiwid2FybiIsImV2ZW50IiwibW9kZWxzIiwiZGF0YVJlZiIsIm1vdmVJdGVtSW5BcnJheSIsInByZXZpb3VzSW5kZXgiLCJjdXJyZW50SW5kZXgiLCJwcmlvcml0eSIsImVhY2giLCJtb2RlbCIsInRyaWdnZXIiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJmZXRjaGVkIiwiZmV0Y2giLCJTZWxlY3QiLCJzZXRUaW1lb3V0IiwiaXNBcnJheSIsIklucHV0IiwiU3RyaW5nIiwicHJvdG90eXBlIiwiTnVtYmVyIiwiQm9vbGVhbiIsIkNvbXBvbmVudCIsInNlbGVjdG9yIiwidGVtcGxhdGVVcmwiLCJjaGFuZ2VEZXRlY3Rpb24iLCJDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSIsIk9uUHVzaCIsIk1hdEljb25SZWdpc3RyeSIsIkRvbVNhbml0aXplciIsIkNoYW5nZURldGVjdG9yUmVmIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0MsU0FBUyxDQUFDLGdCQUFpQixpQkFBa0IseUJBQTBCLE9BQVEsNEJBQTZCLHlCQUEwQixVQUFXLFVBQVcsU0FBVUMsRUFBV0MsR0FDdEwsYUFFQSxJQXdDSUMsRUFBUUMsRUFBU0MsRUFBYUMsRUFBUUMsRUFBb0JDLEVBQVFDLEVBQVNDLEVBQUdDLEVBQWlDQyxFQUFLQyxFQXhDcEhDLEVBQWFDLE1BQVFBLEtBQUtELFlBQWMsU0FBVUUsRUFBWUMsRUFBUUMsRUFBS0MsR0FDN0UsSUFFSUMsRUFGQUMsRUFBSUMsVUFBVUMsT0FDZEMsRUFBSUgs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