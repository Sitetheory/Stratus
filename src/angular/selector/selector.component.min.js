System.register(["@angular/core","@angular/forms","@angular/cdk/drag-drop","rxjs","@angular/platform-browser","@angular/material/icon","stratus","lodash","stratus.services.registry"],(function(t,e){"use strict";var n,s,r,i,o,a,c,h,u,d,l,f,g=this&&this.__decorate||function(t,e,n,s){var r,i=arguments.length,o=i<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(i<3?r(o):i>3?r(e,n,o):r(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},y=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(t){try{c(s.next(t))}catch(t){i(t)}}function a(t){try{c(s.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((s=s.apply(t,e||[])).next())}))};e&&e.id;return{setters:[function(t){n=t},function(t){s=t},function(t){r=t},function(t){i=t},function(t){o=t},function(t){a=t},function(t){c=t},function(t){h=t},function(t){u=t}],execute:function(){d="/assets/1/0/bundles/sitetheorystratus/stratus/src/angular","@stratus/angular","selector",l=(t,e)=>h.has(t,e)&&!h.isEmpty(h.get(t,e)),f=class{constructor(t,e,n){this.ref=n,this.title="selector-dnd",this._=h,this.has=l,this.log=console.log,this.selectCtrl=new s.FormControl,this.registry=new u.Registry,this.onChange=new i.Subject,this.uid=h.uniqueId("sa_selector_component_"),c.Instances[this.uid]=this;const r=this;this.sanitizer=e,t.addSvgIcon("delete",e.bypassSecurityTrustResourceUrl("/Api/Resource?path=@SitetheoryCoreBundle:images/icons/actionButtons/delete.svg")),c.Internals.CssLoader(`${d}/selector/selector.component.css`),console.log("inputs:",this.target,this.id,this.manifest,this.api),h.isUndefined(this.target)&&(this.target="Content"),this.dataSub=new i.Observable(t=>this.dataDefer(t)),this.fetchData().then(t=>{t.on?(t.on("change",()=>{r.dataDefer(r.subscriber),n.detectChanges()}),r.dataDefer(r.subscriber),n.detectChanges()):console.warn("Unable to bind data from Registry!")})}drop(t){const e=this.dataRef();if(!e||!e.length)return;r.moveItemInArray(e,t.previousIndex,t.currentIndex);let n=0;h.each(e,t=>t.priority=n++),this.model.trigger("change")}remove(t){const e=this.dataRef();if(!e||!e.length)return;const n=e.indexOf(t);-1!==n&&(e.splice(n,1),this.model.trigger("change"))}fetchData(){return y(this,void 0,void 0,(function*(){return this.fetched||(this.fetched=this.registry.fetch(c.Select("#widget-edit-entity"),this)),this.fetched}))}dataDefer(t){this.subscriber=t;const e=this.dataRef();e&&e.length?(console.log("pushed models to subscriber."),t.next(e)):setTimeout(()=>{this.dataDefer(t)},500)}dataRef(){if(!this.model)return[];const t=h.get(this.model,"data.version.modules");return t&&h.isArray(t)?t:[]}onDataChange(t){this.dataDefer(this.subscriber),t.detectChanges()}prioritize(){const t=this.dataRef();if(!t||!t.length)return;let e=0;h.each(t,t=>t.priority=e++)}},g([n.Input(),p("design:type",String)],f.prototype,"target",void 0),g([n.Input(),p("design:type",Number)],f.prototype,"id",void 0),g([n.Input(),p("design:type",Boolean)],f.prototype,"manifest",void 0),g([n.Input(),p("design:type",Object)],f.prototype,"api",void 0),g([n.Input(),p("design:type",Object)],f.prototype,"searchQuery",void 0),f=g([n.Component({selector:"sa-selector",templateUrl:`${d}/selector/selector.component.html`,changeDetection:n.ChangeDetectionStrategy.OnPush}),p("design:paramtypes",[a.MatIconRegistry,o.DomSanitizer,n.ChangeDetectorRef])],f),t("SelectorComponent",f)}}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAiXSwibmFtZXMiOlsiU3lzdGVtIiwicmVnaXN0ZXIiLCJleHBvcnRzXzEiLCJjb250ZXh0XzEiLCJjb3JlXzEiLCJmb3Jtc18xIiwiZHJhZ19kcm9wXzEiLCJyeGpzXzEiLCJwbGF0Zm9ybV9icm93c2VyXzEiLCJpY29uXzEiLCJTdHJhdHVzIiwiXyIsInN0cmF0dXNfc2VydmljZXNfcmVnaXN0cnlfMSIsImxvY2FsRGlyIiwiaGFzIiwiU2VsZWN0b3JDb21wb25lbnQiLCJfX2RlY29yYXRlIiwidGhpcyIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJrZXkiLCJkZXNjIiwiZCIsImMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwiaSIsImRlZmluZVByb3BlcnR5IiwiX19tZXRhZGF0YSIsImsiLCJ2IiwibWV0YWRhdGEiLCJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiaWQiLCJzZXR0ZXJzIiwiY29yZV8xXzEiLCJmb3Jtc18xXzEiLCJkcmFnX2Ryb3BfMV8xIiwicnhqc18xXzEiLCJwbGF0Zm9ybV9icm93c2VyXzFfMSIsImljb25fMV8xIiwiU3RyYXR1c18xIiwiXzEiLCJzdHJhdHVzX3NlcnZpY2VzX3JlZ2lzdHJ5XzFfMSIsImV4ZWN1dGUiLCJvYmplY3QiLCJwYXRoIiwiaXNFbXB0eSIsImdldCIsIltvYmplY3QgT2JqZWN0XSIsImljb25SZWdpc3RyeSIsInNhbml0aXplciIsInJlZiIsInRpdGxlIiwibG9nIiwiY29uc29sZSIsInNlbGVjdEN0cmwiLCJGb3JtQ29udHJvbCIsInJlZ2lzdHJ5IiwiUmVnaXN0cnkiLCJvbkNoYW5nZSIsIlN1YmplY3QiLCJ1aWQiLCJ1bmlxdWVJZCIsIkluc3RhbmNlcyIsInRoYXQiLCJhZGRTdmdJY29uIiwiYnlwYXNzU2VjdXJpdHlUcnVzdFJlc291cmNlVXJsIiwiSW50ZXJuYWxzIiwiQ3NzTG9hZGVyIiwibWFuaWZlc3QiLCJhcGkiLCJpc1VuZGVmaW5lZCIsImRhdGFTdWIiLCJPYnNlcnZhYmxlIiwic3Vic2NyaWJlciIsImRhdGFEZWZlciIsImZldGNoRGF0YSIsImRhdGEiLCJvbiIsImRldGVjdENoYW5nZXMiLCJ3YXJuIiwiZXZlbnQiLCJtb2RlbHMiLCJkYXRhUmVmIiwibW92ZUl0ZW1JbkFycmF5IiwicHJldmlvdXNJbmRleCIsImN1cnJlbnRJbmRleCIsInByaW9yaXR5IiwiZWFjaCIsIm1vZGVsIiwidHJpZ2dlciIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImZldGNoZWQiLCJmZXRjaCIsIlNlbGVjdCIsInNldFRpbWVvdXQiLCJpc0FycmF5IiwiSW5wdXQiLCJTdHJpbmciLCJwcm90b3R5cGUiLCJOdW1iZXIiLCJCb29sZWFuIiwiQ29tcG9uZW50Iiwic2VsZWN0b3IiLCJ0ZW1wbGF0ZVVybCIsImNoYW5nZURldGVjdGlvbiIsIkNoYW5nZURldGVjdGlvblN0cmF0ZWd5IiwiT25QdXNoIiwiTWF0SWNvblJlZ2lzdHJ5IiwiRG9tU2FuaXRpemVyIiwiQ2hhbmdlRGV0ZWN0b3JSZWYiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxTQUFTLENBQUMsZ0JBQWlCLGlCQUFrQix5QkFBMEIsT0FBUSw0QkFBNkIseUJBQTBCLFVBQVcsU0FBVSw4QkFBOEIsU0FBVUMsRUFBV0MsR0FDbk4sYUFFQSxJQTRDSUMsRUFBUUMsRUFBU0MsRUFBYUMsRUFBUUMsRUFBb0JDLEVBQVFDLEVBQVNDLEVBQUdDLEVBQTZCQyxFQUFpQ0MsRUFBS0MsRUE1Q2pKQyxFQUFhQyxNQUFRQSxLQUFLRCxZQUFjLFNBQVVFLEVBQVlDLEVBQVFDLEVBQUtDLEdBQzdFLElBRUlDLEVBRkFDLEVBQUlDLFVBQVVDLE9BQ2RDLEVBQUlILEVBQUksRUFBSUosRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9NLE9BQU9DLHlCQUF5QlQsRUFBUUMsR0FBT0MsRUFFL0YsR0FBdUIsaUJBQVpRLFNBQW9ELG1CQUFyQkEsUUFBUUMsU0FBeUJKLEVBQUlHLFFBQVFDLFNBQVNaLEVBQVlDLEVBQVFDLEVBQUtDLFFBQVcsSUFBSyxJQUFJVSxFQUFJYixFQUFXTyxPQUFTLEVBQUdNLEdBQUssRUFBR0EsS0FBU1QsRUFBSUosRUFBV2EsTUFBSUwsR0FBS0gsRUFBSSxFQUFJRCxFQUFFSSxHQUFLSCxFQUFJLEVBQUlELEVBQUVILEVBQVFDLEVBQUtNLEdBQUtKLEVBQUVILEVBQVFDLEtBQVNNLEdBQy9RLE9BQU9ILEVBQUksR0FBS0csR0FBS0MsT0FBT0ssZUFBZWIsRUFBUUMsRUFBS00sR0FBSUEsR0FHMURPLEVBQWFoQixNQUFRQSxLQUFLZ0IsWUFBYyxTQUFVQyxFQUFHQyxHQUN2RCxHQUF1QixpQkFBWk4sU0FBb0QsbUJBQXJCQSxRQUFRTyxTQUF5QixPQUFPUCxRQUFRTyxTQUFTRixFQUFHQyxJQUdwR0UsRUFBWXBCLE1BQVFBLEtBQUtvQixXQUFhLFNBQVVDLEVBQVNDLEVBQVlDLEVBQUdDLEdBTzFFLE9BQU8sSUFBS0QsSUFBTUEsRUFBSUUsV0FBVSxTQUFVQyxFQUFTQyxHQUNqRCxTQUFTQyxFQUFVQyxHQUNqQixJQUNFQyxFQUFLTixFQUFVTyxLQUFLRixJQUNwQixNQUFPRyxHQUNQTCxFQUFPSyxJQUlYLFNBQVNDLEVBQVNKLEdBQ2hCLElBQ0VDLEVBQUtOLEVBQWlCLE1BQUVLLElBQ3hCLE1BQU9HLEdBQ1BMLEVBQU9LLElBSVgsU0FBU0YsRUFBS0ksR0F2QmhCLElBQWVMLEVBd0JYSyxFQUFPQyxLQUFPVCxFQUFRUSxFQUFPTCxRQXhCbEJBLEVBd0JpQ0ssRUFBT0wsTUF2QjlDQSxhQUFpQk4sRUFBSU0sRUFBUSxJQUFJTixHQUFFLFNBQVVHLEdBQ2xEQSxFQUFRRyxPQXNCa0RPLEtBQUtSLEVBQVdLLEdBRzVFSCxHQUFNTixFQUFZQSxFQUFVYSxNQUFNaEIsRUFBU0MsR0FBYyxLQUFLUyxZQU0vQzdDLEdBQWFBLEVBQVVvRCxHQUUxQyxNQUFPLENBQ0xDLFFBQVMsQ0FBQyxTQUFVQyxHQUNsQnJELEVBQVNxRCxHQUNSLFNBQVVDLEdBQ1hyRCxFQUFVcUQsR0FDVCxTQUFVQyxHQUNYckQsRUFBY3FELEdBQ2IsU0FBVUMsR0FDWHJELEVBQVNxRCxHQUNSLFNBQVVDLEdBQ1hyRCxFQUFxQnFELEdBQ3BCLFNBQVVDLEdBQ1hyRCxFQUFTcUQsR0FDUixTQUFVQyxHQUNYckQsRUFBVXFELEdBQ1QsU0FBVUMsR0FDWHJELEVBQUlxRCxHQUNILFNBQVVDLEdBQ1hyRCxFQUE4QnFELElBRWhDQyxRQUFTLFdBQ1ByRCxFQUFXLDREQUNDLG1CQUNDLFdBRWJDLEVBQU0sQ0FBQ3FELEVBQVFDLElBQ056RCxFQUFFRyxJQUFJcUQsRUFBUUMsS0FBVXpELEVBQUUwRCxRQUFRMUQsRUFBRTJELElBQUlILEVBQVFDLElBR3pEckQsRUFBb0IsTUFDbEJ3RCxZQUFZQyxFQUFjQyxFQUFXQyxHQUNuQ3pELEtBQUt5RCxJQUFNQSxFQUNYekQsS0FBSzBELE1BQVEsZUFDYjFELEtBQUtOLEVBQUlBLEVBQ1RNLEtBQUtILElBQU1BLEVBQ1hHLEtBQUsyRCxJQUFNQyxRQUFRRCxJQUNuQjNELEtBQUs2RCxXQUFhLElBQUl6RSxFQUFRMEUsWUFDOUI5RCxLQUFLK0QsU0FBVyxJQUFJcEUsRUFBNEJxRSxTQUNoRGhFLEtBQUtpRSxTQUFXLElBQUkzRSxFQUFPNEUsUUFDM0JsRSxLQUFLbUUsSUFBTXpFLEVBQUUwRSxTQUFTLDBCQUN0QjNFLEVBQVE0RSxVQUFVckUsS0FBS21FLEtBQU9uRSxLQUM5QixNQUFNc0UsRUFBT3RFLEtBQ2JBLEtBQUt3RCxVQUFZQSxFQUNqQkQsRUFBYWdCLFdBQVcsU0FBVWYsRUFBVWdCLCtCQUErQixtRkFDM0UvRSxFQUFRZ0YsVUFBVUMsYUFBYTlFLHFDQUMvQmdFLFFBQVFELElBQUksVUFBVzNELEtBQUtFLE9BQVFGLEtBQUtzQyxHQUFJdEMsS0FBSzJFLFNBQVUzRSxLQUFLNEUsS0FFN0RsRixFQUFFbUYsWUFBWTdFLEtBQUtFLFVBQ3JCRixLQUFLRSxPQUFTLFdBR2hCRixLQUFLOEUsUUFBVSxJQUFJeEYsRUFBT3lGLFdBQVdDLEdBQWNoRixLQUFLaUYsVUFBVUQsSUFDbEVoRixLQUFLa0YsWUFBWTlDLEtBQUsrQyxJQUNmQSxFQUFLQyxJQUtWRCxFQUFLQyxHQUFHLFNBQVUsS0FDaEJkLEVBQUtXLFVBQVVYLEVBQUtVLFlBQ3BCdkIsRUFBSTRCLGtCQUVOZixFQUFLVyxVQUFVWCxFQUFLVSxZQUNwQnZCLEVBQUk0QixpQkFURnpCLFFBQVEwQixLQUFLLHdDQWFuQmhDLEtBQUtpQyxHQUNILE1BQU1DLEVBQVN4RixLQUFLeUYsVUFFcEIsSUFBS0QsSUFBV0EsRUFBT2hGLE9BQ3JCLE9BR0ZuQixFQUFZcUcsZ0JBQWdCRixFQUFRRCxFQUFNSSxjQUFlSixFQUFNSyxjQUMvRCxJQUFJQyxFQUFXLEVBRWZuRyxFQUFFb0csS0FBS04sRUFBUU8sR0FBU0EsRUFBTUYsU0FBV0EsS0FFekM3RixLQUFLK0YsTUFBTUMsUUFBUSxVQUdyQjFDLE9BQU95QyxHQUNMLE1BQU1QLEVBQVN4RixLQUFLeUYsVUFFcEIsSUFBS0QsSUFBV0EsRUFBT2hGLE9BQ3JCLE9BR0YsTUFBTXlGLEVBQVFULEVBQU9VLFFBQVFILElBRWQsSUFBWEUsSUFJSlQsRUFBT1csT0FBT0YsRUFBTyxHQUNyQmpHLEtBQUsrRixNQUFNQyxRQUFRLFdBR3JCMUMsWUFDRSxPQUFPbEMsRUFBVXBCLFVBQU0sT0FBUSxHQUFRLFlBS3JDLE9BSktBLEtBQUtvRyxVQUNScEcsS0FBS29HLFFBQVVwRyxLQUFLK0QsU0FBU3NDLE1BQU01RyxFQUFRNkcsT0FBTyx1QkFBd0J0RyxPQUdyRUEsS0FBS29HLFdBSWhCOUMsVUFBVTBCLEdBQ1JoRixLQUFLZ0YsV0FBYUEsRUFDbEIsTUFBTVEsRUFBU3hGLEtBQUt5RixVQUVmRCxHQUFXQSxFQUFPaEYsUUFPdkJvRCxRQUFRRCxJQUFJLGdDQUNacUIsRUFBV2pELEtBQUt5RCxJQVBkZSxXQUFXLEtBQ1R2RyxLQUFLaUYsVUFBVUQsSUFDZCxLQVFQMUIsVUFDRSxJQUFLdEQsS0FBSytGLE1BQ1IsTUFBTyxHQUdULE1BQU1QLEVBQVM5RixFQUFFMkQsSUFBSXJELEtBQUsrRixNQUFPLHdCQUVqQyxPQUFLUCxHQUFXOUYsRUFBRThHLFFBQVFoQixHQUluQkEsRUFIRSxHQU1YbEMsYUFBYUcsR0FDWHpELEtBQUtpRixVQUFVakYsS0FBS2dGLFlBQ3BCdkIsRUFBSTRCLGdCQUdOL0IsYUFDRSxNQUFNa0MsRUFBU3hGLEtBQUt5RixVQUVwQixJQUFLRCxJQUFXQSxFQUFPaEYsT0FDckIsT0FHRixJQUFJcUYsRUFBVyxFQUVmbkcsRUFBRW9HLEtBQUtOLEVBQVFPLEdBQVNBLEVBQU1GLFNBQVdBLE9BSzdDOUYsRUFBVyxDQUFDWixFQUFPc0gsUUFBU3pGLEVBQVcsY0FBZTBGLFNBQVU1RyxFQUFrQjZHLFVBQVcsY0FBVSxHQUV2RzVHLEVBQVcsQ0FBQ1osRUFBT3NILFFBQVN6RixFQUFXLGNBQWU0RixTQUFVOUcsRUFBa0I2RyxVQUFXLFVBQU0sR0FFbkc1RyxFQUFXLENBQUNaLEVBQU9zSCxRQUFTekYsRUFBVyxjQUFlNkYsVUFBVy9HLEVBQWtCNkcsVUFBVyxnQkFBWSxHQUUxRzVHLEVBQVcsQ0FBQ1osRUFBT3NILFFBQVN6RixFQUFXLGNBQWVOLFNBQVVaLEVBQWtCNkcsVUFBVyxXQUFPLEdBRXBHNUcsRUFBVyxDQUFDWixFQUFPc0gsUUFBU3pGLEVBQVcsY0FBZU4sU0FBVVosRUFBa0I2RyxVQUFXLG1CQUFlLEdBRTVHN0csRUFBb0JDLEVBQVcsQ0FBQ1osRUFBTzJILFVBQVUsQ0FDL0NDLFNBQVUsY0FDVkMsZUFBZ0JwSCxxQ0FDaEJxSCxnQkFBaUI5SCxFQUFPK0gsd0JBQXdCQyxTQUM5Q25HLEVBQVcsb0JBQXFCLENBQUN4QixFQUFPNEgsZ0JBQWlCN0gsRUFBbUI4SCxhQUFjbEksRUFBT21JLHFCQUFzQnhILEdBQzNIYixFQUFVLG9CQUFxQmEifQ==