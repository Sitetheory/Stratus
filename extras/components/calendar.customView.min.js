(function(root,factory){if(typeof define==="function"&&define.amd){define(["exports","stratus","underscore","@fullcalendar/core","@fullcalendar/daygrid"],factory)}else{factory({},root.Stratus,root._,root.FullCalendar,root.FullCalendarDayGrid)}})(this,function(exports,Stratus,_,fullcalendarCore,fullcalendarDayGridPlugin){const min=Stratus.Environment.get("production")?".min":"";const name="calendar.customView";const localPath="extras/components";Stratus.Components.CalendarCustomView={controller:function($scope){const $ctrl=this;$ctrl.uid=_.uniqueId(_.camelToSnake(name)+"_");Stratus.Instances[$ctrl.uid]=$scope;$scope.elementId=$ctrl.uid;$scope.events=[];$scope.$parent.customViewScope=$scope;$ctrl.$onInit=function(){console.log("init initied")};$scope.destroy=function(){if(typeof Stratus.Instances[$ctrl.uid].remove==="function"){Stratus.Instances[$ctrl.uid].remove()}$scope.$destroy();delete Stratus.Instances[$ctrl.uid]}},templateUrl:`${Stratus.BaseUrl}${Stratus.BundlePath}${localPath}/${name}${min}.html`};class CustomView extends fullcalendarCore.View{initialize(){this.$parentScope=this.viewSpec.options.$scope;console.log("parent scope is",this.$parentScope);let calendarCustomViewComponent=this.viewSpec.options.$compile("<stratus-calendar-custom-view></stratus-calendar-custom-view>");this.componentEl=calendarCustomViewComponent(this.$parentScope);let that=this;let stopWatchingScope=this.$parentScope.$watch("customViewScope",function(){if(that.$parentScope.customViewScope){that.$scope=that.$parentScope.customViewScope;stopWatchingScope()}});fullcalendarCore.appendToElement(this.el,this.componentEl)}renderDates(dateProfile){}destroy(){console.log("destroy");super.destroy();this.$scope.destroy()}renderEvents(eventStore,eventUiHash){if(this.$scope){let that=this;that.$scope.$applyAsync(function(){that.$scope.events.length=0;that.$scope.events.push(...that.getEventsInRange(eventStore))})}}getEventsInRange(eventStore,eventUiBases){eventStore=eventStore||this.props.eventStore;eventUiBases=eventUiBases||this.props.eventUiBases;let events=[];let sliceEventObjects=fullcalendarCore.sliceEventStore(eventStore,eventUiBases,this.props.dateProfile.activeRange,this.nextDayThreshold);if(sliceEventObjects.hasOwnProperty("fg")&&_.isArray(sliceEventObjects.fg)){events.push(...sliceEventObjects.fg)}console.log("events",events);return events}}exports.CustomView=CustomView;exports.default=fullcalendarCore.createPlugin({defaultView:"customGrid",views:{custom:{class:CustomView,allDaySlot:true,duration:{month:1}},customGrid:{type:"custom",duration:{days:1}}}});Object.defineProperty(exports,"__esModule",{value:true})});