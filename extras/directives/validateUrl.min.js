!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","underscore","angular"],factory):factory(root.Stratus,root._,root.angular)}(this,function(Stratus,_,angular){Stratus.Directives.ValidateUrl=function(){return{require:"ngModel",scope:{service:"@"},link:function(scope,element,attr,ngModel){element.keyup(function(event){setTimeout(function(){ngModel.$validators.validateUrl=function(modelValue){let urlRegex;const youtubeRegex=/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w-]+\?v=|embed\/|v\/)?)([\w-]+)(\S+)?$/g,vimeoRegex=/(https?:\/\/)?(www.)?(player.)?vimeo.com\/([a-z]*\/)*([a-z0-9]{1,11})[?]?.*/gm;switch(scope.service){case"youtube":urlRegex=youtubeRegex;break;case"vimeo":urlRegex=vimeoRegex;break;case"directlink":urlRegex=/(http(s?):)([\/|.|\w|\s|-])*\.(?:jpg|gif|png)/g;break;case"youtube-vimeo":return modelValue.match(youtubeRegex)||modelValue.match(vimeoRegex);case"embed":urlRegex=/<iframe?.*src=('|")(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:\/?#[\]@!$&'()*+,;=.]?.*<\/iframe>/g}return modelValue.match(urlRegex)},ngModel.$validate()},500)})}}}});