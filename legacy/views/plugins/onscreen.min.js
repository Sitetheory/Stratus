!function(e,t){"function"==typeof define&&define.amd?define(["stratus","jquery","underscore","stratus.views.plugins.base"],t):t(e.Stratus,e.$,e._)}(this,function(e,t,s){e.Views.Plugins.OnScreen=e.Views.Plugins.Base.extend({initialize:function(s){this.prepare(s),e.RegisterGroup.add("OnScroll",{method:e.PluginMethods.CheckOnScreen,el:this.$el,target:this.$el.data("target")?t(this.$el.data("target")):this.$el,spy:this.$el.data("spy")?t(this.$el.data("spy")):this.$el,event:this.$el.data("event")?this.$el.data("event").split(" "):[],offset:this.$el.data("offset")||0,reset:this.$el.data("reset")||0,onScreen:function(){return!s.onScreen||s.onScreen()},offScreen:function(){return!s.offScreen||s.offScreen()}})}}),e.PluginMethods.CheckOnScreen=function(s){var n=e.Environment.get("lastScroll"),r=!1;-1!==s.event.indexOf("reset")&&(s.reset>0&&s.el.offset().top<=s.reset||t(window).scrollTop()<=0)&&(r=!0,s.target.removeClass("onScreen offScreen scrollUp scrollDown reveal unreveal")),r||("down"===n?s.target.addClass("scrollDown"):s.target.removeClass("scrollDown"),"up"===n?s.target.addClass("scrollUp"):s.target.removeClass("scrollUp"),e.Internals.IsOnScreen(s.spy,s.offset)?(s.target.removeClass("offScreen").addClass("onScreen onScreenInit"),s.onScreen()):(s.target.removeClass("onScreen").addClass("offScreen"),"down"===n&&s.target.hasClass("reveal")?s.target.removeClass("reveal").addClass("unreveal"):"up"===n&&s.target.removeClass("unreveal").addClass("reveal"),"up"===n&&s.target.hasClass("revealDown")?s.target.removeClass("revealDown").addClass("unrevealDown"):"down"===n&&s.target.removeClass("unrevealDown").addClass("revealDown"),s.offScreen()))}});