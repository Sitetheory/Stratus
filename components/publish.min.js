!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","underscore","jquery","angular","moment","stratus.services.model","stratus.components.dateTime"],factory):factory(root.Stratus,root._,root.jQuery,root.angular,root.moment)}(this,function(Stratus,_,jQuery,angular,moment){Stratus.Components.Publish={bindings:{ngModel:"=",elementId:"@",full:"@",action:"@",showDateTime:"@",showUnpublish:"@",showVersionHistory:"@",redirect:"@"},controller:function($scope,$element,$parse,$attrs,$log,Model){var uid=_.uniqueId("publish_");return Stratus.Instances[uid]=$scope,Stratus.Internals.CssLoader(Stratus.BaseUrl+Stratus.BundlePath+"components/publish"+(Stratus.Environment.get("production")?".min":"")+".css"),$scope.elementId=$attrs.elementId||uid,$scope.property="version",$scope.full=$attrs.full||!0,_.isString($scope.full)&&($scope.full=_.hydrate($scope.full)),$scope.action="unpublish"===$attrs.action?"unpublish":"publish",$scope.showDateTime=$attrs.showDateTime||!1,$scope.showUnpublish=$attrs.showUnpublish||!1,$scope.showVersionHistory=$attrs.showVersionHistory||!1,$scope.redirect=$attrs.redirect||!1,$scope.propertyTimePublish=$scope.property?$scope.property+".timePublish":null,$scope.showMore=!!($scope.showDateTime||$scope.showUnpublish||$scope.showVersionHistory),$scope.timePublish=null,$scope.model=null,$scope.$watch("$ctrl.ngModel",function(data){data instanceof Model&&data!==$scope.model&&($scope.model=data)}),$scope.setTimePublish=function(time){if(!$scope.model||!$scope.model.get($scope.propertyTimePublish))return!1},$scope.$watch("timePublish",function(data){}),!0},templateUrl:Stratus.BaseUrl+Stratus.BundlePath+"components/publish"+(Stratus.Environment.get("production")?".min":"")+".html"}});