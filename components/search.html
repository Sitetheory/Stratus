<!-- TODO: Monitor Performance and use throttleFetch if need be -->
<div ng-if="display || collection.meta.data.api.q.length > 0 || (collection.meta && collection.meta.data.pagination.pageTotal > 1)">
  <div class="search" flex>
    <md-icon class="left-icon" aria-label="Search" ng-click="collection && collection.filter(query)"
             md-svg-src="/Api/Resource?path=@SitetheoryCoreBundle:images/icons/actionButtons/search.svg"></md-icon>
    <input ng-model="query" placeholder="{{ $ctrl.placeholder || 'Search' }}"
           ng-keyup="$event.keyCode == 13 && collection && collection.filter(query)" class="border-default font-body"/>

    <md-icon aria-label="Reset" ng-show="query.length > 0" class="right-icon active reset-icon"
              ng-click="query = ''; collection.filter('')" md-font-icon="far fa-times-circle"></md-icon>

    <md-icon aria-label="Go" ng-show="query.length > 0" class="right-icon active"
             ng-click="collection && collection.filter(query);"
             md-svg-src="/Api/Resource?path=@SitetheoryCoreBundle:images/icons/actionButtons/forward.svg">
    </md-icon>
  </div>
  <div class="search-progress" ng-if="collection.filtering">
    <md-progress-linear flex md-mode="indeterminate"></md-progress-linear>
  </div>
  <!-- TODO: INTEGRATE sort, Order, Limit and Advanced Search Help, see search.todo-integrate-advanced.html -->
</div>
